/*
---
MooTools: the javascript framework

web build:
 - http://mootools.net/core/76bf47062d6c1983d66ce47ad66aa0e0

packager build:
 - packager build Core/Core Core/Array Core/String Core/Number Core/Function Core/Object Core/Event Core/Browser Core/Class Core/Class.Extras Core/Slick.Parser Core/Slick.Finder Core/Element Core/Element.Style Core/Element.Event Core/Element.Delegation Core/Element.Dimensions Core/Fx Core/Fx.CSS Core/Fx.Tween Core/Fx.Morph Core/Fx.Transitions Core/Request Core/Request.HTML Core/Request.JSON Core/Cookie Core/JSON Core/DOMReady Core/Swiff

copyrights:
  - [MooTools](http://mootools.net)

licenses:
  - [MIT License](http://mootools.net/license.txt)
...
*/

(function(){this.MooTools={version:"1.4.5",build:"ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0"};var e=this.typeOf=function(i){if(i==null){return"null";}if(i.$family!=null){return i.$family();
}if(i.nodeName){if(i.nodeType==1){return"element";}if(i.nodeType==3){return(/\S/).test(i.nodeValue)?"textnode":"whitespace";}}else{if(typeof i.length=="number"){if(i.callee){return"arguments";
}if("item" in i){return"collection";}}}return typeof i;};var u=this.instanceOf=function(w,i){if(w==null){return false;}var v=w.$constructor||w.constructor;
while(v){if(v===i){return true;}v=v.parent;}if(!w.hasOwnProperty){return false;}return w instanceof i;};var f=this.Function;var r=true;for(var q in {toString:1}){r=null;
}if(r){r=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];}f.prototype.overloadSetter=function(v){var i=this;
return function(x,w){if(x==null){return this;}if(v||typeof x!="string"){for(var y in x){i.call(this,y,x[y]);}if(r){for(var z=r.length;z--;){y=r[z];if(x.hasOwnProperty(y)){i.call(this,y,x[y]);
}}}}else{i.call(this,x,w);}return this;};};f.prototype.overloadGetter=function(v){var i=this;return function(x){var y,w;if(typeof x!="string"){y=x;}else{if(arguments.length>1){y=arguments;
}else{if(v){y=[x];}}}if(y){w={};for(var z=0;z<y.length;z++){w[y[z]]=i.call(this,y[z]);}}else{w=i.call(this,x);}return w;};};f.prototype.extend=function(i,v){this[i]=v;
}.overloadSetter();f.prototype.implement=function(i,v){this.prototype[i]=v;}.overloadSetter();var o=Array.prototype.slice;f.from=function(i){return(e(i)=="function")?i:function(){return i;
};};Array.from=function(i){if(i==null){return[];}return(k.isEnumerable(i)&&typeof i!="string")?(e(i)=="array")?i:o.call(i):[i];};Number.from=function(v){var i=parseFloat(v);
return isFinite(i)?i:null;};String.from=function(i){return i+"";};f.implement({hide:function(){this.$hidden=true;return this;},protect:function(){this.$protected=true;
return this;}});var k=this.Type=function(x,w){if(x){var v=x.toLowerCase();var i=function(y){return(e(y)==v);};k["is"+x]=i;if(w!=null){w.prototype.$family=(function(){return v;
}).hide();w.type=i;}}if(w==null){return null;}w.extend(this);w.$constructor=k;w.prototype.$constructor=w;return w;};var p=Object.prototype.toString;k.isEnumerable=function(i){return(i!=null&&typeof i.length=="number"&&p.call(i)!="[object Function]");
};var b={};var d=function(i){var v=e(i.prototype);return b[v]||(b[v]=[]);};var h=function(w,A){if(A&&A.$hidden){return;}var v=d(this);for(var x=0;x<v.length;
x++){var z=v[x];if(e(z)=="type"){h.call(z,w,A);}else{z.call(this,w,A);}}var y=this.prototype[w];if(y==null||!y.$protected){this.prototype[w]=A;}if(this[w]==null&&e(A)=="function"){t.call(this,w,function(i){return A.apply(i,o.call(arguments,1));
});}};var t=function(i,w){if(w&&w.$hidden){return;}var v=this[i];if(v==null||!v.$protected){this[i]=w;}};k.implement({implement:h.overloadSetter(),extend:t.overloadSetter(),alias:function(i,v){h.call(this,i,this.prototype[v]);
}.overloadSetter(),mirror:function(i){d(this).push(i);return this;}});new k("Type",k);var c=function(v,A,y){var x=(A!=Object),E=A.prototype;if(x){A=new k(v,A);
}for(var B=0,z=y.length;B<z;B++){var F=y[B],D=A[F],C=E[F];if(D){D.protect();}if(x&&C){A.implement(F,C.protect());}}if(x){var w=E.propertyIsEnumerable(y[0]);
A.forEachMethod=function(J){if(!w){for(var I=0,G=y.length;I<G;I++){J.call(E,E[y[I]],y[I]);}}for(var H in E){J.call(E,E[H],H);}};}return c;};c("String",String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",f,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]);
Object.extend=t.overloadSetter();Date.extend("now",function(){return +(new Date);});new k("Boolean",Boolean);Number.prototype.$family=function(){return isFinite(this)?"number":"null";
}.hide();Number.extend("random",function(v,i){return Math.floor(Math.random()*(i-v+1)+v);});var l=Object.prototype.hasOwnProperty;Object.extend("forEach",function(i,w,x){for(var v in i){if(l.call(i,v)){w.call(x,i[v],v,i);
}}});Object.each=Object.forEach;Array.implement({forEach:function(x,y){for(var w=0,v=this.length;w<v;w++){if(w in this){x.call(y,this[w],w,this);}}},each:function(i,v){Array.forEach(this,i,v);
return this;}});var s=function(i){switch(e(i)){case"array":return i.clone();case"object":return Object.clone(i);default:return i;}};Array.implement("clone",function(){var v=this.length,w=new Array(v);
while(v--){w[v]=s(this[v]);}return w;});var a=function(v,i,w){switch(e(w)){case"object":if(e(v[i])=="object"){Object.merge(v[i],w);}else{v[i]=Object.clone(w);
}break;case"array":v[i]=w.clone();break;default:v[i]=w;}return v;};Object.extend({merge:function(C,y,x){if(e(y)=="string"){return a(C,y,x);}for(var B=1,w=arguments.length;
B<w;B++){var z=arguments[B];for(var A in z){a(C,A,z[A]);}}return C;},clone:function(i){var w={};for(var v in i){w[v]=s(i[v]);}return w;},append:function(z){for(var y=1,w=arguments.length;
y<w;y++){var v=arguments[y]||{};for(var x in v){z[x]=v[x];}}return z;}});["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(i){new k(i);
});var j=Date.now();String.extend("uniqueID",function(){return(j++).toString(36);});var g=this.Hash=new k("Hash",function(i){if(e(i)=="hash"){i=Object.clone(i.getClean());
}for(var v in i){this[v]=i[v];}return this;});g.implement({forEach:function(i,v){Object.forEach(this,i,v);},getClean:function(){var v={};for(var i in this){if(this.hasOwnProperty(i)){v[i]=this[i];
}}return v;},getLength:function(){var v=0;for(var i in this){if(this.hasOwnProperty(i)){v++;}}return v;}});g.alias("each","forEach");Object.type=k.isObject;
var n=this.Native=function(i){return new k(i.name,i.initialize);};n.type=k.type;n.implement=function(x,v){for(var w=0;w<x.length;w++){x[w].implement(v);
}return n;};var m=Array.type;Array.type=function(i){return u(i,Array)||m(i);};this.$A=function(i){return Array.from(i).slice();};this.$arguments=function(v){return function(){return arguments[v];
};};this.$chk=function(i){return !!(i||i===0);};this.$clear=function(i){clearTimeout(i);clearInterval(i);return null;};this.$defined=function(i){return(i!=null);
};this.$each=function(w,v,x){var i=e(w);((i=="arguments"||i=="collection"||i=="array"||i=="elements")?Array:Object).each(w,v,x);};this.$empty=function(){};
this.$extend=function(v,i){return Object.append(v,i);};this.$H=function(i){return new g(i);};this.$merge=function(){var i=Array.slice(arguments);i.unshift({});
return Object.merge.apply(null,i);};this.$lambda=f.from;this.$mixin=Object.merge;this.$random=Number.random;this.$splat=Array.from;this.$time=Date.now;
this.$type=function(i){var v=e(i);if(v=="elements"){return"array";}return(v=="null")?false:v;};this.$unlink=function(i){switch(e(i)){case"object":return Object.clone(i);
case"array":return Array.clone(i);case"hash":return new g(i);default:return i;}};})();Array.implement({every:function(c,d){for(var b=0,a=this.length>>>0;
b<a;b++){if((b in this)&&!c.call(d,this[b],b,this)){return false;}}return true;},filter:function(d,f){var c=[];for(var e,b=0,a=this.length>>>0;b<a;b++){if(b in this){e=this[b];
if(d.call(f,e,b,this)){c.push(e);}}}return c;},indexOf:function(c,d){var b=this.length>>>0;for(var a=(d<0)?Math.max(0,b+d):d||0;a<b;a++){if(this[a]===c){return a;
}}return -1;},map:function(c,e){var d=this.length>>>0,b=Array(d);for(var a=0;a<d;a++){if(a in this){b[a]=c.call(e,this[a],a,this);}}return b;},some:function(c,d){for(var b=0,a=this.length>>>0;
b<a;b++){if((b in this)&&c.call(d,this[b],b,this)){return true;}}return false;},clean:function(){return this.filter(function(a){return a!=null;});},invoke:function(a){var b=Array.slice(arguments,1);
return this.map(function(c){return c[a].apply(c,b);});},associate:function(c){var d={},b=Math.min(this.length,c.length);for(var a=0;a<b;a++){d[c[a]]=this[a];
}return d;},link:function(c){var a={};for(var e=0,b=this.length;e<b;e++){for(var d in c){if(c[d](this[e])){a[d]=this[e];delete c[d];break;}}}return a;},contains:function(a,b){return this.indexOf(a,b)!=-1;
},append:function(a){this.push.apply(this,a);return this;},getLast:function(){return(this.length)?this[this.length-1]:null;},getRandom:function(){return(this.length)?this[Number.random(0,this.length-1)]:null;
},include:function(a){if(!this.contains(a)){this.push(a);}return this;},combine:function(c){for(var b=0,a=c.length;b<a;b++){this.include(c[b]);}return this;
},erase:function(b){for(var a=this.length;a--;){if(this[a]===b){this.splice(a,1);}}return this;},empty:function(){this.length=0;return this;},flatten:function(){var d=[];
for(var b=0,a=this.length;b<a;b++){var c=typeOf(this[b]);if(c=="null"){continue;}d=d.concat((c=="array"||c=="collection"||c=="arguments"||instanceOf(this[b],Array))?Array.flatten(this[b]):this[b]);
}return d;},pick:function(){for(var b=0,a=this.length;b<a;b++){if(this[b]!=null){return this[b];}}return null;},hexToRgb:function(b){if(this.length!=3){return null;
}var a=this.map(function(c){if(c.length==1){c+=c;}return c.toInt(16);});return(b)?a:"rgb("+a+")";},rgbToHex:function(d){if(this.length<3){return null;}if(this.length==4&&this[3]==0&&!d){return"transparent";
}var b=[];for(var a=0;a<3;a++){var c=(this[a]-0).toString(16);b.push((c.length==1)?"0"+c:c);}return(d)?b:"#"+b.join("");}});Array.alias("extend","append");
var $pick=function(){return Array.from(arguments).pick();};String.implement({test:function(a,b){return((typeOf(a)=="regexp")?a:new RegExp(""+a,b)).test(this);
},contains:function(a,b){return(b)?(b+this+b).indexOf(b+a+b)>-1:String(this).indexOf(a)>-1;},trim:function(){return String(this).replace(/^\s+|\s+$/g,"");
},clean:function(){return String(this).replace(/\s+/g," ").trim();},camelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase();
});},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(a){return("-"+a.charAt(0).toLowerCase());});},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(a){return a.toUpperCase();
});},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");},toInt:function(a){return parseInt(this,a||10);},toFloat:function(){return parseFloat(this);
},hexToRgb:function(b){var a=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(a)?a.slice(1).hexToRgb(b):null;},rgbToHex:function(b){var a=String(this).match(/\d{1,3}/g);
return(a)?a.rgbToHex(b):null;},substitute:function(a,b){return String(this).replace(b||(/\\?\{([^{}]+)\}/g),function(d,c){if(d.charAt(0)=="\\"){return d.slice(1);
}return(a[c]!=null)?a[c]:"";});}});Number.implement({limit:function(b,a){return Math.min(a,Math.max(b,this));},round:function(a){a=Math.pow(10,a||0).toFixed(a<0?-a:0);
return Math.round(this*a)/a;},times:function(b,c){for(var a=0;a<this;a++){b.call(c,a,this);}},toFloat:function(){return parseFloat(this);},toInt:function(a){return parseInt(this,a||10);
}});Number.alias("each","times");(function(b){var a={};b.each(function(c){if(!Number[c]){a[c]=function(){return Math[c].apply(null,[this].concat(Array.from(arguments)));
};}});Number.implement(a);})(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]);Function.extend({attempt:function(){for(var b=0,a=arguments.length;
b<a;b++){try{return arguments[b]();}catch(c){}}return null;}});Function.implement({attempt:function(a,c){try{return this.apply(c,Array.from(a));}catch(b){}return null;
},bind:function(e){var a=this,b=arguments.length>1?Array.slice(arguments,1):null,d=function(){};var c=function(){var g=e,h=arguments.length;if(this instanceof c){d.prototype=a.prototype;
g=new d;}var f=(!b&&!h)?a.call(g):a.apply(g,b&&h?b.concat(Array.slice(arguments)):b||arguments);return g==e?f:g;};return c;},pass:function(b,c){var a=this;
if(b!=null){b=Array.from(b);}return function(){return a.apply(c,b||arguments);};},delay:function(b,c,a){return setTimeout(this.pass((a==null?[]:a),c),b);
},periodical:function(c,b,a){return setInterval(this.pass((a==null?[]:a),b),c);}});delete Function.prototype.bind;Function.implement({create:function(b){var a=this;
b=b||{};return function(d){var c=b.arguments;c=(c!=null)?Array.from(c):Array.slice(arguments,(b.event)?1:0);if(b.event){c=[d||window.event].extend(c);}var e=function(){return a.apply(b.bind||null,c);
};if(b.delay){return setTimeout(e,b.delay);}if(b.periodical){return setInterval(e,b.periodical);}if(b.attempt){return Function.attempt(e);}return e();};
},bind:function(c,b){var a=this;if(b!=null){b=Array.from(b);}return function(){return a.apply(c,b||arguments);};},bindWithEvent:function(c,b){var a=this;
if(b!=null){b=Array.from(b);}return function(d){return a.apply(c,(b==null)?arguments:[d].concat(b));};},run:function(a,b){return this.apply(b,Array.from(a));
}});if(Object.create==Function.prototype.create){Object.create=null;}var $try=Function.attempt;(function(){var a=Object.prototype.hasOwnProperty;Object.extend({subset:function(d,g){var f={};
for(var e=0,b=g.length;e<b;e++){var c=g[e];if(c in d){f[c]=d[c];}}return f;},map:function(b,e,f){var d={};for(var c in b){if(a.call(b,c)){d[c]=e.call(f,b[c],c,b);
}}return d;},filter:function(b,e,g){var d={};for(var c in b){var f=b[c];if(a.call(b,c)&&e.call(g,f,c,b)){d[c]=f;}}return d;},every:function(b,d,e){for(var c in b){if(a.call(b,c)&&!d.call(e,b[c],c)){return false;
}}return true;},some:function(b,d,e){for(var c in b){if(a.call(b,c)&&d.call(e,b[c],c)){return true;}}return false;},keys:function(b){var d=[];for(var c in b){if(a.call(b,c)){d.push(c);
}}return d;},values:function(c){var b=[];for(var d in c){if(a.call(c,d)){b.push(c[d]);}}return b;},getLength:function(b){return Object.keys(b).length;},keyOf:function(b,d){for(var c in b){if(a.call(b,c)&&b[c]===d){return c;
}}return null;},contains:function(b,c){return Object.keyOf(b,c)!=null;},toQueryString:function(b,c){var d=[];Object.each(b,function(h,g){if(c){g=c+"["+g+"]";
}var f;switch(typeOf(h)){case"object":f=Object.toQueryString(h,g);break;case"array":var e={};h.each(function(k,j){e[j]=k;});f=Object.toQueryString(e,g);
break;default:f=g+"="+encodeURIComponent(h);}if(h!=null){d.push(f);}});return d.join("&");}});})();Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(a){return Object.keyOf(this,a);
},hasValue:function(a){return Object.contains(this,a);},extend:function(a){Hash.each(a||{},function(c,b){Hash.set(this,b,c);},this);return this;},combine:function(a){Hash.each(a||{},function(c,b){Hash.include(this,b,c);
},this);return this;},erase:function(a){if(this.hasOwnProperty(a)){delete this[a];}return this;},get:function(a){return(this.hasOwnProperty(a))?this[a]:null;
},set:function(a,b){if(!this[a]||this.hasOwnProperty(a)){this[a]=b;}return this;},empty:function(){Hash.each(this,function(b,a){delete this[a];},this);
return this;},include:function(a,b){if(this[a]==null){this[a]=b;}return this;},map:function(a,b){return new Hash(Object.map(this,a,b));},filter:function(a,b){return new Hash(Object.filter(this,a,b));
},every:function(a,b){return Object.every(this,a,b);},some:function(a,b){return Object.some(this,a,b);},getKeys:function(){return Object.keys(this);},getValues:function(){return Object.values(this);
},toQueryString:function(a){return Object.toQueryString(this,a);}});Hash.extend=Object.append;Hash.alias({indexOf:"keyOf",contains:"hasValue"});(function(){var k=this.document;
var h=k.window=this;var a=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),i=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],f=i[1]=="ie"&&k.documentMode;
var o=this.Browser={extend:Function.prototype.extend,name:(i[1]=="version")?i[3]:i[1],version:f||parseFloat((i[1]=="opera"&&i[4])?i[4]:i[2]),Platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!(k.evaluate),air:!!(h.runtime),query:!!(k.querySelector),json:!!(h.JSON)},Plugins:{}};
o[o.name]=true;o[o.name+parseInt(o.version,10)]=true;o.Platform[o.Platform.name]=true;o.Request=(function(){var q=function(){return new XMLHttpRequest();
};var p=function(){return new ActiveXObject("MSXML2.XMLHTTP");};var e=function(){return new ActiveXObject("Microsoft.XMLHTTP");};return Function.attempt(function(){q();
return q;},function(){p();return p;},function(){e();return e;});})();o.Features.xhr=!!(o.Request);var j=(Function.attempt(function(){return navigator.plugins["Shockwave Flash"].description;
},function(){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version");})||"0 r0").match(/\d+/g);o.Plugins.Flash={version:Number(j[0]||"0."+j[1])||0,build:Number(j[2])||0};
o.exec=function(p){if(!p){return p;}if(h.execScript){h.execScript(p);}else{var e=k.createElement("script");e.setAttribute("type","text/javascript");e.text=p;
k.head.appendChild(e);k.head.removeChild(e);}return p;};String.implement("stripScripts",function(p){var e="";var q=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(r,s){e+=s+"\n";
return"";});if(p===true){o.exec(e);}else{if(typeOf(p)=="function"){p(e,q);}}return q;});o.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});
this.Window=this.$constructor=new Type("Window",function(){});this.$family=Function.from("window").hide();Window.mirror(function(e,p){h[e]=p;});this.Document=k.$constructor=new Type("Document",function(){});
k.$family=Function.from("document").hide();Document.mirror(function(e,p){k[e]=p;});k.html=k.documentElement;if(!k.head){k.head=k.getElementsByTagName("head")[0];
}if(k.execCommand){try{k.execCommand("BackgroundImageCache",false,true);}catch(g){}}if(this.attachEvent&&!this.addEventListener){var c=function(){this.detachEvent("onunload",c);
k.head=k.html=k.window=null;};this.attachEvent("onunload",c);}var m=Array.from;try{m(k.html.childNodes);}catch(g){Array.from=function(p){if(typeof p!="string"&&Type.isEnumerable(p)&&typeOf(p)!="array"){var e=p.length,q=new Array(e);
while(e--){q[e]=p[e];}return q;}return m(p);};var l=Array.prototype,n=l.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(e){var p=l[e];
Array[e]=function(q){return p.apply(Array.from(q),n.call(arguments,1));};});}if(o.Platform.ios){o.Platform.ipod=true;}o.Engine={};var d=function(p,e){o.Engine.name=p;
o.Engine[p+e]=true;o.Engine.version=e;};if(o.ie){o.Engine.trident=true;switch(o.version){case 6:d("trident",4);break;case 7:d("trident",5);break;case 8:d("trident",6);
}}if(o.firefox){o.Engine.gecko=true;if(o.version>=3){d("gecko",19);}else{d("gecko",18);}}if(o.safari||o.chrome){o.Engine.webkit=true;switch(o.version){case 2:d("webkit",419);
break;case 3:d("webkit",420);break;case 4:d("webkit",525);}}if(o.opera){o.Engine.presto=true;if(o.version>=9.6){d("presto",960);}else{if(o.version>=9.5){d("presto",950);
}else{d("presto",925);}}}if(o.name=="unknown"){switch((a.match(/(?:webkit|khtml|gecko)/)||[])[0]){case"webkit":case"khtml":o.Engine.webkit=true;break;case"gecko":o.Engine.gecko=true;
}}this.$exec=o.exec;})();(function(){var b={};var a=this.DOMEvent=new Type("DOMEvent",function(c,g){if(!g){g=window;}c=c||g.event;if(c.$extended){return c;
}this.event=c;this.$extended=true;this.shift=c.shiftKey;this.control=c.ctrlKey;this.alt=c.altKey;this.meta=c.metaKey;var i=this.type=c.type;var h=c.target||c.srcElement;
while(h&&h.nodeType==3){h=h.parentNode;}this.target=document.id(h);if(i.indexOf("key")==0){var d=this.code=(c.which||c.keyCode);this.key=b[d]||Object.keyOf(Event.Keys,d);
if(i=="keydown"){if(d>111&&d<124){this.key="f"+(d-111);}else{if(d>95&&d<106){this.key=d-96;}}}if(this.key==null){this.key=String.fromCharCode(d).toLowerCase();
}}else{if(i=="click"||i=="dblclick"||i=="contextmenu"||i=="DOMMouseScroll"||i.indexOf("mouse")==0){var j=g.document;j=(!j.compatMode||j.compatMode=="CSS1Compat")?j.html:j.body;
this.page={x:(c.pageX!=null)?c.pageX:c.clientX+j.scrollLeft,y:(c.pageY!=null)?c.pageY:c.clientY+j.scrollTop};this.client={x:(c.pageX!=null)?c.pageX-g.pageXOffset:c.clientX,y:(c.pageY!=null)?c.pageY-g.pageYOffset:c.clientY};
if(i=="DOMMouseScroll"||i=="mousewheel"){this.wheel=(c.wheelDelta)?c.wheelDelta/120:-(c.detail||0)/3;}this.rightClick=(c.which==3||c.button==2);if(i=="mouseover"||i=="mouseout"){var k=c.relatedTarget||c[(i=="mouseover"?"from":"to")+"Element"];
while(k&&k.nodeType==3){k=k.parentNode;}this.relatedTarget=document.id(k);}}else{if(i.indexOf("touch")==0||i.indexOf("gesture")==0){this.rotation=c.rotation;
this.scale=c.scale;this.targetTouches=c.targetTouches;this.changedTouches=c.changedTouches;var f=this.touches=c.touches;if(f&&f[0]){var e=f[0];this.page={x:e.pageX,y:e.pageY};
this.client={x:e.clientX,y:e.clientY};}}}}if(!this.client){this.client={};}if(!this.page){this.page={};}});a.implement({stop:function(){return this.preventDefault().stopPropagation();
},stopPropagation:function(){if(this.event.stopPropagation){this.event.stopPropagation();}else{this.event.cancelBubble=true;}return this;},preventDefault:function(){if(this.event.preventDefault){this.event.preventDefault();
}else{this.event.returnValue=false;}return this;}});a.defineKey=function(d,c){b[d]=c;return this;};a.defineKeys=a.defineKey.overloadSetter(true);a.defineKeys({"38":"up","40":"down","37":"left","39":"right","27":"esc","32":"space","8":"backspace","9":"tab","46":"delete","13":"enter"});
})();var Event=DOMEvent;Event.Keys={};Event.Keys=new Hash(Event.Keys);(function(){var a=this.Class=new Type("Class",function(h){if(instanceOf(h,Function)){h={initialize:h};
}var g=function(){e(this);if(g.$prototyping){return this;}this.$caller=null;var i=(this.initialize)?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;
return i;}.extend(this).implement(h);g.$constructor=a;g.prototype.$constructor=g;g.prototype.parent=c;return g;});var c=function(){if(!this.$caller){throw new Error('The method "parent" cannot be called.');
}var g=this.$caller.$name,h=this.$caller.$owner.parent,i=(h)?h.prototype[g]:null;if(!i){throw new Error('The method "'+g+'" has no parent.');}return i.apply(this,arguments);
};var e=function(g){for(var h in g){var j=g[h];switch(typeOf(j)){case"object":var i=function(){};i.prototype=j;g[h]=e(new i);break;case"array":g[h]=j.clone();
break;}}return g;};var b=function(g,h,j){if(j.$origin){j=j.$origin;}var i=function(){if(j.$protected&&this.$caller==null){throw new Error('The method "'+h+'" cannot be called.');
}var l=this.caller,m=this.$caller;this.caller=m;this.$caller=i;var k=j.apply(this,arguments);this.$caller=m;this.caller=l;return k;}.extend({$owner:g,$origin:j,$name:h});
return i;};var f=function(h,i,g){if(a.Mutators.hasOwnProperty(h)){i=a.Mutators[h].call(this,i);if(i==null){return this;}}if(typeOf(i)=="function"){if(i.$hidden){return this;
}this.prototype[h]=(g)?i:b(this,h,i);}else{Object.merge(this.prototype,h,i);}return this;};var d=function(g){g.$prototyping=true;var h=new g;delete g.$prototyping;
return h;};a.implement("implement",f.overloadSetter());a.Mutators={Extends:function(g){this.parent=g;this.prototype=d(g);},Implements:function(g){Array.from(g).each(function(j){var h=new j;
for(var i in h){f.call(this,i,h[i],true);}},this);}};})();(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));
return this;},callChain:function(){return(this.$chain.length)?this.$chain.shift().apply(this,arguments):false;},clearChain:function(){this.$chain.empty();
return this;}});var a=function(b){return b.replace(/^on([A-Z])/,function(c,d){return d.toLowerCase();});};this.Events=new Class({$events:{},addEvent:function(d,c,b){d=a(d);
if(c==$empty){return this;}this.$events[d]=(this.$events[d]||[]).include(c);if(b){c.internal=true;}return this;},addEvents:function(b){for(var c in b){this.addEvent(c,b[c]);
}return this;},fireEvent:function(e,c,b){e=a(e);var d=this.$events[e];if(!d){return this;}c=Array.from(c);d.each(function(f){if(b){f.delay(b,this,c);}else{f.apply(this,c);
}},this);return this;},removeEvent:function(e,d){e=a(e);var c=this.$events[e];if(c&&!d.internal){var b=c.indexOf(d);if(b!=-1){delete c[b];}}return this;
},removeEvents:function(d){var e;if(typeOf(d)=="object"){for(e in d){this.removeEvent(e,d[e]);}return this;}if(d){d=a(d);}for(e in this.$events){if(d&&d!=e){continue;
}var c=this.$events[e];for(var b=c.length;b--;){if(b in c){this.removeEvent(e,c[b]);}}}return this;}});this.Options=new Class({setOptions:function(){var b=this.options=Object.merge.apply(null,[{},this.options].append(arguments));
if(this.addEvent){for(var c in b){if(typeOf(b[c])!="function"||!(/^on[A-Z]/).test(c)){continue;}this.addEvent(c,b[c]);delete b[c];}}return this;}});})();
(function(){var k,n,l,g,a={},c={},m=/\\/g;var e=function(q,p){if(q==null){return null;}if(q.Slick===true){return q;}q=(""+q).replace(/^\s+|\s+$/g,"");g=!!p;
var o=(g)?c:a;if(o[q]){return o[q];}k={Slick:true,expressions:[],raw:q,reverse:function(){return e(this.raw,true);}};n=-1;while(q!=(q=q.replace(j,b))){}k.length=k.expressions.length;
return o[k.raw]=(g)?h(k):k;};var i=function(o){if(o==="!"){return" ";}else{if(o===" "){return"!";}else{if((/^!/).test(o)){return o.replace(/^!/,"");}else{return"!"+o;
}}}};var h=function(u){var r=u.expressions;for(var p=0;p<r.length;p++){var t=r[p];var q={parts:[],tag:"*",combinator:i(t[0].combinator)};for(var o=0;o<t.length;
o++){var s=t[o];if(!s.reverseCombinator){s.reverseCombinator=" ";}s.combinator=s.reverseCombinator;delete s.reverseCombinator;}t.reverse().push(q);}return u;
};var f=function(o){return o.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(p){return"\\"+p;});};var j=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+f(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));
function b(x,s,D,z,r,C,q,B,A,y,u,F,G,v,p,w){if(s||n===-1){k.expressions[++n]=[];l=-1;if(s){return"";}}if(D||z||l===-1){D=D||" ";var t=k.expressions[n];
if(g&&t[l]){t[l].reverseCombinator=i(D);}t[++l]={combinator:D,tag:"*"};}var o=k.expressions[n][l];if(r){o.tag=r.replace(m,"");}else{if(C){o.id=C.replace(m,"");
}else{if(q){q=q.replace(m,"");if(!o.classList){o.classList=[];}if(!o.classes){o.classes=[];}o.classList.push(q);o.classes.push({value:q,regexp:new RegExp("(^|\\s)"+f(q)+"(\\s|$)")});
}else{if(G){w=w||p;w=w?w.replace(m,""):null;if(!o.pseudos){o.pseudos=[];}o.pseudos.push({key:G.replace(m,""),value:w,type:F.length==1?"class":"element"});
}else{if(B){B=B.replace(m,"");u=(u||"").replace(m,"");var E,H;switch(A){case"^=":H=new RegExp("^"+f(u));break;case"$=":H=new RegExp(f(u)+"$");break;case"~=":H=new RegExp("(^|\\s)"+f(u)+"(\\s|$)");
break;case"|=":H=new RegExp("^"+f(u)+"(-|$)");break;case"=":E=function(I){return u==I;};break;case"*=":E=function(I){return I&&I.indexOf(u)>-1;};break;
case"!=":E=function(I){return u!=I;};break;default:E=function(I){return !!I;};}if(u==""&&(/^[*$^]=$/).test(A)){E=function(){return false;};}if(!E){E=function(I){return I&&H.test(I);
};}if(!o.attributes){o.attributes=[];}o.attributes.push({key:B,operator:A,value:u,test:E});}}}}}return"";}var d=(this.Slick||{});d.parse=function(o){return e(o);
};d.escapeRegExp=f;if(!this.Slick){this.Slick=d;}}).apply((typeof exports!="undefined")?exports:this);(function(){var k={},m={},d=Object.prototype.toString;
k.isNativeCode=function(c){return(/\{\s*\[native code\]\s*\}/).test(""+c);};k.isXML=function(c){return(!!c.xmlVersion)||(!!c.xml)||(d.call(c)=="[object XMLDocument]")||(c.nodeType==9&&c.documentElement.nodeName!="HTML");
};k.setDocument=function(w){var p=w.nodeType;if(p==9){}else{if(p){w=w.ownerDocument;}else{if(w.navigator){w=w.document;}else{return;}}}if(this.document===w){return;
}this.document=w;var A=w.documentElement,o=this.getUIDXML(A),s=m[o],r;if(s){for(r in s){this[r]=s[r];}return;}s=m[o]={};s.root=A;s.isXMLDocument=this.isXML(w);
s.brokenStarGEBTN=s.starSelectsClosedQSA=s.idGetsName=s.brokenMixedCaseQSA=s.brokenGEBCN=s.brokenCheckedQSA=s.brokenEmptyAttributeQSA=s.isHTMLDocument=s.nativeMatchesSelector=false;
var q,u,y,z,t;var x,v="slick_uniqueid";var c=w.createElement("div");var n=w.body||w.getElementsByTagName("body")[0]||A;n.appendChild(c);try{c.innerHTML='<a id="'+v+'"></a>';
s.isHTMLDocument=!!w.getElementById(v);}catch(C){}if(s.isHTMLDocument){c.style.display="none";c.appendChild(w.createComment(""));u=(c.getElementsByTagName("*").length>1);
try{c.innerHTML="foo</foo>";x=c.getElementsByTagName("*");q=(x&&!!x.length&&x[0].nodeName.charAt(0)=="/");}catch(C){}s.brokenStarGEBTN=u||q;try{c.innerHTML='<a name="'+v+'"></a><b id="'+v+'"></b>';
s.idGetsName=w.getElementById(v)===c.firstChild;}catch(C){}if(c.getElementsByClassName){try{c.innerHTML='<a class="f"></a><a class="b"></a>';c.getElementsByClassName("b").length;
c.firstChild.className="b";z=(c.getElementsByClassName("b").length!=2);}catch(C){}try{c.innerHTML='<a class="a"></a><a class="f b a"></a>';y=(c.getElementsByClassName("a").length!=2);
}catch(C){}s.brokenGEBCN=z||y;}if(c.querySelectorAll){try{c.innerHTML="foo</foo>";x=c.querySelectorAll("*");s.starSelectsClosedQSA=(x&&!!x.length&&x[0].nodeName.charAt(0)=="/");
}catch(C){}try{c.innerHTML='<a class="MiX"></a>';s.brokenMixedCaseQSA=!c.querySelectorAll(".MiX").length;}catch(C){}try{c.innerHTML='<select><option selected="selected">a</option></select>';
s.brokenCheckedQSA=(c.querySelectorAll(":checked").length==0);}catch(C){}try{c.innerHTML='<a class=""></a>';s.brokenEmptyAttributeQSA=(c.querySelectorAll('[class*=""]').length!=0);
}catch(C){}}try{c.innerHTML='<form action="s"><input id="action"/></form>';t=(c.firstChild.getAttribute("action")!="s");}catch(C){}s.nativeMatchesSelector=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector;
if(s.nativeMatchesSelector){try{s.nativeMatchesSelector.call(A,":slick");s.nativeMatchesSelector=null;}catch(C){}}}try{A.slick_expando=1;delete A.slick_expando;
s.getUID=this.getUIDHTML;}catch(C){s.getUID=this.getUIDXML;}n.removeChild(c);c=x=n=null;s.getAttribute=(s.isHTMLDocument&&t)?function(G,E){var H=this.attributeGetters[E];
if(H){return H.call(G);}var F=G.getAttributeNode(E);return(F)?F.nodeValue:null;}:function(F,E){var G=this.attributeGetters[E];return(G)?G.call(F):F.getAttribute(E);
};s.hasAttribute=(A&&this.isNativeCode(A.hasAttribute))?function(F,E){return F.hasAttribute(E);}:function(F,E){F=F.getAttributeNode(E);return !!(F&&(F.specified||F.nodeValue));
};var D=A&&this.isNativeCode(A.contains),B=w&&this.isNativeCode(w.contains);s.contains=(D&&B)?function(E,F){return E.contains(F);}:(D&&!B)?function(E,F){return E===F||((E===w)?w.documentElement:E).contains(F);
}:(A&&A.compareDocumentPosition)?function(E,F){return E===F||!!(E.compareDocumentPosition(F)&16);}:function(E,F){if(F){do{if(F===E){return true;}}while((F=F.parentNode));
}return false;};s.documentSorter=(A.compareDocumentPosition)?function(F,E){if(!F.compareDocumentPosition||!E.compareDocumentPosition){return 0;}return F.compareDocumentPosition(E)&4?-1:F===E?0:1;
}:("sourceIndex" in A)?function(F,E){if(!F.sourceIndex||!E.sourceIndex){return 0;}return F.sourceIndex-E.sourceIndex;}:(w.createRange)?function(H,F){if(!H.ownerDocument||!F.ownerDocument){return 0;
}var G=H.ownerDocument.createRange(),E=F.ownerDocument.createRange();G.setStart(H,0);G.setEnd(H,0);E.setStart(F,0);E.setEnd(F,0);return G.compareBoundaryPoints(Range.START_TO_END,E);
}:null;A=null;for(r in s){this[r]=s[r];}};var f=/^([#.]?)((?:[\w-]+|\*))$/,h=/\[.+[*$^]=(?:""|'')?\]/,g={};k.search=function(U,z,H,s){var p=this.found=(s)?null:(H||[]);
if(!U){return p;}else{if(U.navigator){U=U.document;}else{if(!U.nodeType){return p;}}}var F,O,V=this.uniques={},I=!!(H&&H.length),y=(U.nodeType==9);if(this.document!==(y?U:U.ownerDocument)){this.setDocument(U);
}if(I){for(O=p.length;O--;){V[this.getUID(p[O])]=true;}}if(typeof z=="string"){var r=z.match(f);simpleSelectors:if(r){var u=r[1],v=r[2],A,E;if(!u){if(v=="*"&&this.brokenStarGEBTN){break simpleSelectors;
}E=U.getElementsByTagName(v);if(s){return E[0]||null;}for(O=0;A=E[O++];){if(!(I&&V[this.getUID(A)])){p.push(A);}}}else{if(u=="#"){if(!this.isHTMLDocument||!y){break simpleSelectors;
}A=U.getElementById(v);if(!A){return p;}if(this.idGetsName&&A.getAttributeNode("id").nodeValue!=v){break simpleSelectors;}if(s){return A||null;}if(!(I&&V[this.getUID(A)])){p.push(A);
}}else{if(u=="."){if(!this.isHTMLDocument||((!U.getElementsByClassName||this.brokenGEBCN)&&U.querySelectorAll)){break simpleSelectors;}if(U.getElementsByClassName&&!this.brokenGEBCN){E=U.getElementsByClassName(v);
if(s){return E[0]||null;}for(O=0;A=E[O++];){if(!(I&&V[this.getUID(A)])){p.push(A);}}}else{var T=new RegExp("(^|\\s)"+e.escapeRegExp(v)+"(\\s|$)");E=U.getElementsByTagName("*");
for(O=0;A=E[O++];){className=A.className;if(!(className&&T.test(className))){continue;}if(s){return A;}if(!(I&&V[this.getUID(A)])){p.push(A);}}}}}}if(I){this.sort(p);
}return(s)?null:p;}querySelector:if(U.querySelectorAll){if(!this.isHTMLDocument||g[z]||this.brokenMixedCaseQSA||(this.brokenCheckedQSA&&z.indexOf(":checked")>-1)||(this.brokenEmptyAttributeQSA&&h.test(z))||(!y&&z.indexOf(",")>-1)||e.disableQSA){break querySelector;
}var S=z,x=U;if(!y){var C=x.getAttribute("id"),t="slickid__";x.setAttribute("id",t);S="#"+t+" "+S;U=x.parentNode;}try{if(s){return U.querySelector(S)||null;
}else{E=U.querySelectorAll(S);}}catch(Q){g[z]=1;break querySelector;}finally{if(!y){if(C){x.setAttribute("id",C);}else{x.removeAttribute("id");}U=x;}}if(this.starSelectsClosedQSA){for(O=0;
A=E[O++];){if(A.nodeName>"@"&&!(I&&V[this.getUID(A)])){p.push(A);}}}else{for(O=0;A=E[O++];){if(!(I&&V[this.getUID(A)])){p.push(A);}}}if(I){this.sort(p);
}return p;}F=this.Slick.parse(z);if(!F.length){return p;}}else{if(z==null){return p;}else{if(z.Slick){F=z;}else{if(this.contains(U.documentElement||U,z)){(p)?p.push(z):p=z;
return p;}else{return p;}}}}this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=(!I&&(s||(F.length==1&&F.expressions[0].length==1)))?this.pushArray:this.pushUID;
if(p==null){p=[];}var M,L,K;var B,J,D,c,q,G,W;var N,P,o,w,R=F.expressions;search:for(O=0;(P=R[O]);O++){for(M=0;(o=P[M]);M++){B="combinator:"+o.combinator;
if(!this[B]){continue search;}J=(this.isXMLDocument)?o.tag:o.tag.toUpperCase();D=o.id;c=o.classList;q=o.classes;G=o.attributes;W=o.pseudos;w=(M===(P.length-1));
this.bitUniques={};if(w){this.uniques=V;this.found=p;}else{this.uniques={};this.found=[];}if(M===0){this[B](U,J,D,q,G,W,c);if(s&&w&&p.length){break search;
}}else{if(s&&w){for(L=0,K=N.length;L<K;L++){this[B](N[L],J,D,q,G,W,c);if(p.length){break search;}}}else{for(L=0,K=N.length;L<K;L++){this[B](N[L],J,D,q,G,W,c);
}}}N=this.found;}}if(I||(F.expressions.length>1)){this.sort(p);}return(s)?(p[0]||null):p;};k.uidx=1;k.uidk="slick-uniqueid";k.getUIDXML=function(n){var c=n.getAttribute(this.uidk);
if(!c){c=this.uidx++;n.setAttribute(this.uidk,c);}return c;};k.getUIDHTML=function(c){return c.uniqueNumber||(c.uniqueNumber=this.uidx++);};k.sort=function(c){if(!this.documentSorter){return c;
}c.sort(this.documentSorter);return c;};k.cacheNTH={};k.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;k.parseNTHArgument=function(q){var o=q.match(this.matchNTH);
if(!o){return false;}var p=o[2]||false;var n=o[1]||1;if(n=="-"){n=-1;}var c=+o[3]||0;o=(p=="n")?{a:n,b:c}:(p=="odd")?{a:2,b:1}:(p=="even")?{a:2,b:0}:{a:0,b:n};
return(this.cacheNTH[q]=o);};k.createNTHPseudo=function(p,n,c,o){return function(s,q){var u=this.getUID(s);if(!this[c][u]){var A=s.parentNode;if(!A){return false;
}var r=A[p],t=1;if(o){var z=s.nodeName;do{if(r.nodeName!=z){continue;}this[c][this.getUID(r)]=t++;}while((r=r[n]));}else{do{if(r.nodeType!=1){continue;
}this[c][this.getUID(r)]=t++;}while((r=r[n]));}}q=q||"n";var v=this.cacheNTH[q]||this.parseNTHArgument(q);if(!v){return false;}var y=v.a,x=v.b,w=this[c][u];
if(y==0){return x==w;}if(y>0){if(w<x){return false;}}else{if(x<w){return false;}}return((w-x)%y)==0;};};k.pushArray=function(p,c,r,o,n,q){if(this.matchSelector(p,c,r,o,n,q)){this.found.push(p);
}};k.pushUID=function(q,c,s,p,n,r){var o=this.getUID(q);if(!this.uniques[o]&&this.matchSelector(q,c,s,p,n,r)){this.uniques[o]=true;this.found.push(q);}};
k.matchNode=function(n,o){if(this.isHTMLDocument&&this.nativeMatchesSelector){try{return this.nativeMatchesSelector.call(n,o.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'));
}catch(u){}}var t=this.Slick.parse(o);if(!t){return true;}var r=t.expressions,s=0,q;for(q=0;(currentExpression=r[q]);q++){if(currentExpression.length==1){var p=currentExpression[0];
if(this.matchSelector(n,(this.isXMLDocument)?p.tag:p.tag.toUpperCase(),p.id,p.classes,p.attributes,p.pseudos)){return true;}s++;}}if(s==t.length){return false;
}var c=this.search(this.document,t),v;for(q=0;v=c[q++];){if(v===n){return true;}}return false;};k.matchPseudo=function(q,c,p){var n="pseudo:"+c;if(this[n]){return this[n](q,p);
}var o=this.getAttribute(q,c);return(p)?p==o:!!o;};k.matchSelector=function(o,v,c,p,q,s){if(v){var t=(this.isXMLDocument)?o.nodeName:o.nodeName.toUpperCase();
if(v=="*"){if(t<"@"){return false;}}else{if(t!=v){return false;}}}if(c&&o.getAttribute("id")!=c){return false;}var r,n,u;if(p){for(r=p.length;r--;){u=this.getAttribute(o,"class");
if(!(u&&p[r].regexp.test(u))){return false;}}}if(q){for(r=q.length;r--;){n=q[r];if(n.operator?!n.test(this.getAttribute(o,n.key)):!this.hasAttribute(o,n.key)){return false;
}}}if(s){for(r=s.length;r--;){n=s[r];if(!this.matchPseudo(o,n.key,n.value)){return false;}}}return true;};var j={" ":function(q,w,n,r,s,u,p){var t,v,o;
if(this.isHTMLDocument){getById:if(n){v=this.document.getElementById(n);if((!v&&q.all)||(this.idGetsName&&v&&v.getAttributeNode("id").nodeValue!=n)){o=q.all[n];
if(!o){return;}if(!o[0]){o=[o];}for(t=0;v=o[t++];){var c=v.getAttributeNode("id");if(c&&c.nodeValue==n){this.push(v,w,null,r,s,u);break;}}return;}if(!v){if(this.contains(this.root,q)){return;
}else{break getById;}}else{if(this.document!==q&&!this.contains(q,v)){return;}}this.push(v,w,null,r,s,u);return;}getByClass:if(r&&q.getElementsByClassName&&!this.brokenGEBCN){o=q.getElementsByClassName(p.join(" "));
if(!(o&&o.length)){break getByClass;}for(t=0;v=o[t++];){this.push(v,w,n,null,s,u);}return;}}getByTag:{o=q.getElementsByTagName(w);if(!(o&&o.length)){break getByTag;
}if(!this.brokenStarGEBTN){w=null;}for(t=0;v=o[t++];){this.push(v,w,n,r,s,u);}}},">":function(p,c,r,o,n,q){if((p=p.firstChild)){do{if(p.nodeType==1){this.push(p,c,r,o,n,q);
}}while((p=p.nextSibling));}},"+":function(p,c,r,o,n,q){while((p=p.nextSibling)){if(p.nodeType==1){this.push(p,c,r,o,n,q);break;}}},"^":function(p,c,r,o,n,q){p=p.firstChild;
if(p){if(p.nodeType==1){this.push(p,c,r,o,n,q);}else{this["combinator:+"](p,c,r,o,n,q);}}},"~":function(q,c,s,p,n,r){while((q=q.nextSibling)){if(q.nodeType!=1){continue;
}var o=this.getUID(q);if(this.bitUniques[o]){break;}this.bitUniques[o]=true;this.push(q,c,s,p,n,r);}},"++":function(p,c,r,o,n,q){this["combinator:+"](p,c,r,o,n,q);
this["combinator:!+"](p,c,r,o,n,q);},"~~":function(p,c,r,o,n,q){this["combinator:~"](p,c,r,o,n,q);this["combinator:!~"](p,c,r,o,n,q);},"!":function(p,c,r,o,n,q){while((p=p.parentNode)){if(p!==this.document){this.push(p,c,r,o,n,q);
}}},"!>":function(p,c,r,o,n,q){p=p.parentNode;if(p!==this.document){this.push(p,c,r,o,n,q);}},"!+":function(p,c,r,o,n,q){while((p=p.previousSibling)){if(p.nodeType==1){this.push(p,c,r,o,n,q);
break;}}},"!^":function(p,c,r,o,n,q){p=p.lastChild;if(p){if(p.nodeType==1){this.push(p,c,r,o,n,q);}else{this["combinator:!+"](p,c,r,o,n,q);}}},"!~":function(q,c,s,p,n,r){while((q=q.previousSibling)){if(q.nodeType!=1){continue;
}var o=this.getUID(q);if(this.bitUniques[o]){break;}this.bitUniques[o]=true;this.push(q,c,s,p,n,r);}}};for(var i in j){k["combinator:"+i]=j[i];}var l={empty:function(c){var n=c.firstChild;
return !(n&&n.nodeType==1)&&!(c.innerText||c.textContent||"").length;},not:function(c,n){return !this.matchNode(c,n);},contains:function(c,n){return(c.innerText||c.textContent||"").indexOf(n)>-1;
},"first-child":function(c){while((c=c.previousSibling)){if(c.nodeType==1){return false;}}return true;},"last-child":function(c){while((c=c.nextSibling)){if(c.nodeType==1){return false;
}}return true;},"only-child":function(o){var n=o;while((n=n.previousSibling)){if(n.nodeType==1){return false;}}var c=o;while((c=c.nextSibling)){if(c.nodeType==1){return false;
}}return true;},"nth-child":k.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":k.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":k.createNTHPseudo("firstChild","nextSibling","posNTHType",true),"nth-last-of-type":k.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",true),index:function(n,c){return this["pseudo:nth-child"](n,""+(c+1));
},even:function(c){return this["pseudo:nth-child"](c,"2n");},odd:function(c){return this["pseudo:nth-child"](c,"2n+1");},"first-of-type":function(c){var n=c.nodeName;
while((c=c.previousSibling)){if(c.nodeName==n){return false;}}return true;},"last-of-type":function(c){var n=c.nodeName;while((c=c.nextSibling)){if(c.nodeName==n){return false;
}}return true;},"only-of-type":function(o){var n=o,p=o.nodeName;while((n=n.previousSibling)){if(n.nodeName==p){return false;}}var c=o;while((c=c.nextSibling)){if(c.nodeName==p){return false;
}}return true;},enabled:function(c){return !c.disabled;},disabled:function(c){return c.disabled;},checked:function(c){return c.checked||c.selected;},focus:function(c){return this.isHTMLDocument&&this.document.activeElement===c&&(c.href||c.type||this.hasAttribute(c,"tabindex"));
},root:function(c){return(c===this.root);},selected:function(c){return c.selected;}};for(var b in l){k["pseudo:"+b]=l[b];}var a=k.attributeGetters={"for":function(){return("htmlFor" in this)?this.htmlFor:this.getAttribute("for");
},href:function(){return("href" in this)?this.getAttribute("href",2):this.getAttribute("href");},style:function(){return(this.style)?this.style.cssText:this.getAttribute("style");
},tabindex:function(){var c=this.getAttributeNode("tabindex");return(c&&c.specified)?c.nodeValue:null;},type:function(){return this.getAttribute("type");
},maxlength:function(){var c=this.getAttributeNode("maxLength");return(c&&c.specified)?c.nodeValue:null;}};a.MAXLENGTH=a.maxLength=a.maxlength;var e=k.Slick=(this.Slick||{});
e.version="1.1.7";e.search=function(n,o,c){return k.search(n,o,c);};e.find=function(c,n){return k.search(c,n,null,true);};e.contains=function(c,n){k.setDocument(c);
return k.contains(c,n);};e.getAttribute=function(n,c){k.setDocument(n);return k.getAttribute(n,c);};e.hasAttribute=function(n,c){k.setDocument(n);return k.hasAttribute(n,c);
};e.match=function(n,c){if(!(n&&c)){return false;}if(!c||c===n){return true;}k.setDocument(n);return k.matchNode(n,c);};e.defineAttributeGetter=function(c,n){k.attributeGetters[c]=n;
return this;};e.lookupAttributeGetter=function(c){return k.attributeGetters[c];};e.definePseudo=function(c,n){k["pseudo:"+c]=function(p,o){return n.call(p,o);
};return this;};e.lookupPseudo=function(c){var n=k["pseudo:"+c];if(n){return function(o){return n.call(this,o);};}return null;};e.override=function(n,c){k.override(n,c);
return this;};e.isXML=k.isXML;e.uidOf=function(c){return k.getUIDHTML(c);};if(!this.Slick){this.Slick=e;}}).apply((typeof exports!="undefined")?exports:this);
var Element=function(b,g){var h=Element.Constructors[b];if(h){return h(g);}if(typeof b!="string"){return document.id(b).set(g);}if(!g){g={};}if(!(/^[\w-]+$/).test(b)){var e=Slick.parse(b).expressions[0][0];
b=(e.tag=="*")?"div":e.tag;if(e.id&&g.id==null){g.id=e.id;}var d=e.attributes;if(d){for(var a,f=0,c=d.length;f<c;f++){a=d[f];if(g[a.key]!=null){continue;
}if(a.value!=null&&a.operator=="="){g[a.key]=a.value;}else{if(!a.value&&!a.operator){g[a.key]=true;}}}}if(e.classList&&g["class"]==null){g["class"]=e.classList.join(" ");
}}return document.newElement(b,g);};if(Browser.Element){Element.prototype=Browser.Element.prototype;Element.prototype._fireEvent=(function(a){return function(b,c){return a.call(this,b,c);
};})(Element.prototype.fireEvent);}new Type("Element",Element).mirror(function(a){if(Array.prototype[a]){return;}var b={};b[a]=function(){var h=[],e=arguments,j=true;
for(var g=0,d=this.length;g<d;g++){var f=this[g],c=h[g]=f[a].apply(f,e);j=(j&&typeOf(c)=="element");}return(j)?new Elements(h):h;};Elements.implement(b);
});if(!Browser.Element){Element.parent=Object;Element.Prototype={"$constructor":Element,"$family":Function.from("element").hide()};Element.mirror(function(a,b){Element.Prototype[a]=b;
});}Element.Constructors={};Element.Constructors=new Hash;var IFrame=new Type("IFrame",function(){var e=Array.link(arguments,{properties:Type.isObject,iframe:function(f){return(f!=null);
}});var c=e.properties||{},b;if(e.iframe){b=document.id(e.iframe);}var d=c.onload||function(){};delete c.onload;c.id=c.name=[c.id,c.name,b?(b.id||b.name):"IFrame_"+String.uniqueID()].pick();
b=new Element(b||"iframe",c);var a=function(){d.call(b.contentWindow);};if(window.frames[c.id]){a();}else{b.addListener("load",a);}return b;});var Elements=this.Elements=function(a){if(a&&a.length){var e={},d;
for(var c=0;d=a[c++];){var b=Slick.uidOf(d);if(!e[b]){e[b]=true;this.push(d);}}}};Elements.prototype={length:0};Elements.parent=Array;new Type("Elements",Elements).implement({filter:function(a,b){if(!a){return this;
}return new Elements(Array.filter(this,(typeOf(a)=="string")?function(c){return c.match(a);}:a,b));}.protect(),push:function(){var d=this.length;for(var b=0,a=arguments.length;
b<a;b++){var c=document.id(arguments[b]);if(c){this[d++]=c;}}return(this.length=d);}.protect(),unshift:function(){var b=[];for(var c=0,a=arguments.length;
c<a;c++){var d=document.id(arguments[c]);if(d){b.push(d);}}return Array.prototype.unshift.apply(this,b);}.protect(),concat:function(){var b=new Elements(this);
for(var c=0,a=arguments.length;c<a;c++){var d=arguments[c];if(Type.isEnumerable(d)){b.append(d);}else{b.push(d);}}return b;}.protect(),append:function(c){for(var b=0,a=c.length;
b<a;b++){this.push(c[b]);}return this;}.protect(),empty:function(){while(this.length){delete this[--this.length];}return this;}.protect()});Elements.alias("extend","append");
(function(){var f=Array.prototype.splice,a={"0":0,"1":1,length:2};f.call(a,1,1);if(a[1]==1){Elements.implement("splice",function(){var g=this.length;var e=f.apply(this,arguments);
while(g>=this.length){delete this[g--];}return e;}.protect());}Array.forEachMethod(function(g,e){Elements.implement(e,g);});Array.mirror(Elements);var d;
try{d=(document.createElement("<input name=x>").name=="x");}catch(b){}var c=function(e){return(""+e).replace(/&/g,"&amp;").replace(/"/g,"&quot;");};Document.implement({newElement:function(e,g){if(g&&g.checked!=null){g.defaultChecked=g.checked;
}if(d&&g){e="<"+e;if(g.name){e+=' name="'+c(g.name)+'"';}if(g.type){e+=' type="'+c(g.type)+'"';}e+=">";delete g.name;delete g.type;}return this.id(this.createElement(e)).set(g);
}});})();(function(){Slick.uidOf(window);Slick.uidOf(document);Document.implement({newTextNode:function(e){return this.createTextNode(e);},getDocument:function(){return this;
},getWindow:function(){return this.window;},id:(function(){var e={string:function(E,D,l){E=Slick.find(l,"#"+E.replace(/(\W)/g,"\\$1"));return(E)?e.element(E,D):null;
},element:function(D,E){Slick.uidOf(D);if(!E&&!D.$family&&!(/^(?:object|embed)$/i).test(D.tagName)){var l=D.fireEvent;D._fireEvent=function(F,G){return l(F,G);
};Object.append(D,Element.Prototype);}return D;},object:function(D,E,l){if(D.toElement){return e.element(D.toElement(l),E);}return null;}};e.textnode=e.whitespace=e.window=e.document=function(l){return l;
};return function(D,F,E){if(D&&D.$family&&D.uniqueNumber){return D;}var l=typeOf(D);return(e[l])?e[l](D,F,E||document):null;};})()});if(window.$==null){Window.implement("$",function(e,l){return document.id(e,l,this.document);
});}Window.implement({getDocument:function(){return this.document;},getWindow:function(){return this;}});[Document,Element].invoke("implement",{getElements:function(e){return Slick.search(this,e,new Elements);
},getElement:function(e){return document.id(Slick.find(this,e));}});var m={contains:function(e){return Slick.contains(this,e);}};if(!document.contains){Document.implement(m);
}if(!document.createElement("div").contains){Element.implement(m);}Element.implement("hasChild",function(e){return this!==e&&this.contains(e);});(function(l,E,e){this.Selectors={};
var F=this.Selectors.Pseudo=new Hash();var D=function(){for(var G in F){if(F.hasOwnProperty(G)){Slick.definePseudo(G,F[G]);delete F[G];}}};Slick.search=function(H,I,G){D();
return l.call(this,H,I,G);};Slick.find=function(G,H){D();return E.call(this,G,H);};Slick.match=function(H,G){D();return e.call(this,H,G);};})(Slick.search,Slick.find,Slick.match);
var r=function(E,D){if(!E){return D;}E=Object.clone(Slick.parse(E));var l=E.expressions;for(var e=l.length;e--;){l[e][0].combinator=D;}return E;};Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(e,l){Element.implement(l,function(D){return this.getElement(r(D,e));
});});Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(e,l){Element.implement(l,function(D){return this.getElements(r(D,e));
});});Element.implement({getFirst:function(e){return document.id(Slick.search(this,r(e,">"))[0]);},getLast:function(e){return document.id(Slick.search(this,r(e,">")).getLast());
},getWindow:function(){return this.ownerDocument.window;},getDocument:function(){return this.ownerDocument;},getElementById:function(e){return document.id(Slick.find(this,"#"+(""+e).replace(/(\W)/g,"\\$1")));
},match:function(e){return !e||Slick.match(this,e);}});if(window.$$==null){Window.implement("$$",function(e){var H=new Elements;if(arguments.length==1&&typeof e=="string"){return Slick.search(this.document,e,H);
}var E=Array.flatten(arguments);for(var F=0,D=E.length;F<D;F++){var G=E[F];switch(typeOf(G)){case"element":H.push(G);break;case"string":Slick.search(this.document,G,H);
}}return H;});}if(window.$$==null){Window.implement("$$",function(e){if(arguments.length==1){if(typeof e=="string"){return Slick.search(this.document,e,new Elements);
}else{if(Type.isEnumerable(e)){return new Elements(e);}}}return new Elements(arguments);});}var w={before:function(l,e){var D=e.parentNode;if(D){D.insertBefore(l,e);
}},after:function(l,e){var D=e.parentNode;if(D){D.insertBefore(l,e.nextSibling);}},bottom:function(l,e){e.appendChild(l);},top:function(l,e){e.insertBefore(l,e.firstChild);
}};w.inside=w.bottom;Object.each(w,function(l,D){D=D.capitalize();var e={};e["inject"+D]=function(E){l(this,document.id(E,true));return this;};e["grab"+D]=function(E){l(document.id(E,true),this);
return this;};Element.implement(e);});var j={},d={};var k={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(e){k[e.toLowerCase()]=e;
});k.html="innerHTML";k.text=(document.createElement("div").textContent==null)?"innerText":"textContent";Object.forEach(k,function(l,e){d[e]=function(D,E){D[l]=E;
};j[e]=function(D){return D[l];};});var x=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"];
var h={};Array.forEach(x,function(e){var l=e.toLowerCase();h[l]=e;d[l]=function(D,E){D[e]=!!E;};j[l]=function(D){return !!D[e];};});Object.append(d,{"class":function(e,l){("className" in e)?e.className=(l||""):e.setAttribute("class",l);
},"for":function(e,l){("htmlFor" in e)?e.htmlFor=l:e.setAttribute("for",l);},style:function(e,l){(e.style)?e.style.cssText=l:e.setAttribute("style",l);
},value:function(e,l){e.value=(l!=null)?l:"";}});j["class"]=function(e){return("className" in e)?e.className||null:e.getAttribute("class");};var f=document.createElement("button");
try{f.type="button";}catch(z){}if(f.type!="button"){d.type=function(e,l){e.setAttribute("type",l);};}f=null;var p=document.createElement("input");p.value="t";
p.type="submit";if(p.value!="t"){d.type=function(l,e){var D=l.value;l.type=e;l.value=D;};}p=null;var q=(function(e){e.random="attribute";return(e.getAttribute("random")=="attribute");
})(document.createElement("div"));Element.implement({setProperty:function(l,D){var E=d[l.toLowerCase()];if(E){E(this,D);}else{if(q){var e=this.retrieve("$attributeWhiteList",{});
}if(D==null){this.removeAttribute(l);if(q){delete e[l];}}else{this.setAttribute(l,""+D);if(q){e[l]=true;}}}return this;},setProperties:function(e){for(var l in e){this.setProperty(l,e[l]);
}return this;},getProperty:function(F){var D=j[F.toLowerCase()];if(D){return D(this);}if(q){var l=this.getAttributeNode(F),E=this.retrieve("$attributeWhiteList",{});
if(!l){return null;}if(l.expando&&!E[F]){var G=this.outerHTML;if(G.substr(0,G.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(F)<0){return null;}E[F]=true;}}var e=Slick.getAttribute(this,F);
return(!e&&!Slick.hasAttribute(this,F))?null:e;},getProperties:function(){var e=Array.from(arguments);return e.map(this.getProperty,this).associate(e);
},removeProperty:function(e){return this.setProperty(e,null);},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this;},set:function(D,l){var e=Element.Properties[D];
(e&&e.set)?e.set.call(this,l):this.setProperty(D,l);}.overloadSetter(),get:function(l){var e=Element.Properties[l];return(e&&e.get)?e.get.apply(this):this.getProperty(l);
}.overloadGetter(),erase:function(l){var e=Element.Properties[l];(e&&e.erase)?e.erase.apply(this):this.removeProperty(l);return this;},hasClass:function(e){return this.className.clean().contains(e," ");
},addClass:function(e){if(!this.hasClass(e)){this.className=(this.className+" "+e).clean();}return this;},removeClass:function(e){this.className=this.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1");
return this;},toggleClass:function(e,l){if(l==null){l=!this.hasClass(e);}return(l)?this.addClass(e):this.removeClass(e);},adopt:function(){var E=this,e,G=Array.flatten(arguments),F=G.length;
if(F>1){E=e=document.createDocumentFragment();}for(var D=0;D<F;D++){var l=document.id(G[D],true);if(l){E.appendChild(l);}}if(e){this.appendChild(e);}return this;
},appendText:function(l,e){return this.grab(this.getDocument().newTextNode(l),e);},grab:function(l,e){w[e||"bottom"](document.id(l,true),this);return this;
},inject:function(l,e){w[e||"bottom"](this,document.id(l,true));return this;},replaces:function(e){e=document.id(e,true);e.parentNode.replaceChild(this,e);
return this;},wraps:function(l,e){l=document.id(l,true);return this.replaces(l).grab(l,e);},getSelected:function(){this.selectedIndex;return new Elements(Array.from(this.options).filter(function(e){return e.selected;
}));},toQueryString:function(){var e=[];this.getElements("input, select, textarea").each(function(D){var l=D.type;if(!D.name||D.disabled||l=="submit"||l=="reset"||l=="file"||l=="image"){return;
}var E=(D.get("tag")=="select")?D.getSelected().map(function(F){return document.id(F).get("value");}):((l=="radio"||l=="checkbox")&&!D.checked)?null:D.get("value");
Array.from(E).each(function(F){if(typeof F!="undefined"){e.push(encodeURIComponent(D.name)+"="+encodeURIComponent(F));}});});return e.join("&");}});var i={},A={};
var B=function(e){return(A[e]||(A[e]={}));};var v=function(l){var e=l.uniqueNumber;if(l.removeEvents){l.removeEvents();}if(l.clearAttributes){l.clearAttributes();
}if(e!=null){delete i[e];delete A[e];}return l;};var C={input:"checked",option:"selected",textarea:"value"};Element.implement({destroy:function(){var e=v(this).getElementsByTagName("*");
Array.each(e,v);Element.dispose(this);return null;},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this;},dispose:function(){return(this.parentNode)?this.parentNode.removeChild(this):this;
},clone:function(G,E){G=G!==false;var L=this.cloneNode(G),D=[L],F=[this],J;if(G){D.append(Array.from(L.getElementsByTagName("*")));F.append(Array.from(this.getElementsByTagName("*")));
}for(J=D.length;J--;){var H=D[J],K=F[J];if(!E){H.removeAttribute("id");}if(H.clearAttributes){H.clearAttributes();H.mergeAttributes(K);H.removeAttribute("uniqueNumber");
if(H.options){var O=H.options,e=K.options;for(var I=O.length;I--;){O[I].selected=e[I].selected;}}}var l=C[K.tagName.toLowerCase()];if(l&&K[l]){H[l]=K[l];
}}if(Browser.ie){var M=L.getElementsByTagName("object"),N=this.getElementsByTagName("object");for(J=M.length;J--;){M[J].outerHTML=N[J].outerHTML;}}return document.id(L);
}});[Element,Window,Document].invoke("implement",{addListener:function(E,D){if(E=="unload"){var e=D,l=this;D=function(){l.removeListener("unload",D);e();
};}else{i[Slick.uidOf(this)]=this;}if(this.addEventListener){this.addEventListener(E,D,!!arguments[2]);}else{this.attachEvent("on"+E,D);}return this;},removeListener:function(l,e){if(this.removeEventListener){this.removeEventListener(l,e,!!arguments[2]);
}else{this.detachEvent("on"+l,e);}return this;},retrieve:function(l,e){var E=B(Slick.uidOf(this)),D=E[l];if(e!=null&&D==null){D=E[l]=e;}return D!=null?D:null;
},store:function(l,e){var D=B(Slick.uidOf(this));D[l]=e;return this;},eliminate:function(e){var l=B(Slick.uidOf(this));delete l[e];return this;}});if(window.attachEvent&&!window.addEventListener){window.addListener("unload",function(){Object.each(i,v);
if(window.CollectGarbage){CollectGarbage();}});}Element.Properties={};Element.Properties=new Hash;Element.Properties.style={set:function(e){this.style.cssText=e;
},get:function(){return this.style.cssText;},erase:function(){this.style.cssText="";}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase();
}};Element.Properties.html={set:function(e){if(e==null){e="";}else{if(typeOf(e)=="array"){e=e.join("");}}this.innerHTML=e;},erase:function(){this.innerHTML="";
}};var t=document.createElement("div");t.innerHTML="<nav></nav>";var a=(t.childNodes.length==1);if(!a){var s="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),b=document.createDocumentFragment(),u=s.length;
while(u--){b.createElement(s[u]);}}t=null;var g=Function.attempt(function(){var e=document.createElement("table");e.innerHTML="<tr><td></td></tr>";return true;
});var c=document.createElement("tr"),o="<td></td>";c.innerHTML=o;var y=(c.innerHTML==o);c=null;if(!g||!y||!a){Element.Properties.html.set=(function(l){var e={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};
e.thead=e.tfoot=e.tbody;return function(D){var E=e[this.get("tag")];if(!E&&!a){E=[0,"",""];}if(!E){return l.call(this,D);}var H=E[0],G=document.createElement("div"),F=G;
if(!a){b.appendChild(G);}G.innerHTML=[E[1],D,E[2]].flatten().join("");while(H--){F=F.firstChild;}this.empty().adopt(F.childNodes);if(!a){b.removeChild(G);
}G=null;};})(Element.Properties.html.set);}var n=document.createElement("form");n.innerHTML="<select><option>s</option></select>";if(n.firstChild.value!="s"){Element.Properties.value={set:function(G){var l=this.get("tag");
if(l!="select"){return this.setProperty("value",G);}var D=this.getElements("option");for(var E=0;E<D.length;E++){var F=D[E],e=F.getAttributeNode("value"),H=(e&&e.specified)?F.value:F.get("text");
if(H==G){return F.selected=true;}}},get:function(){var D=this,l=D.get("tag");if(l!="select"&&l!="option"){return this.getProperty("value");}if(l=="select"&&!(D=D.getSelected()[0])){return"";
}var e=D.getAttributeNode("value");return(e&&e.specified)?D.value:D.get("text");}};}n=null;if(document.createElement("div").getAttributeNode("id")){Element.Properties.id={set:function(e){this.id=this.getAttributeNode("id").value=e;
},get:function(){return this.id||null;},erase:function(){this.id=this.getAttributeNode("id").value="";}};}})();(function(){var i=document.html;var d=document.createElement("div");
d.style.color="red";d.style.color=null;var c=d.style.color=="red";d=null;Element.Properties.styles={set:function(k){this.setStyles(k);}};var h=(i.style.opacity!=null),e=(i.style.filter!=null),j=/alpha\(opacity=([\d.]+)\)/i;
var a=function(l,k){l.store("$opacity",k);l.style.visibility=k>0||k==null?"visible":"hidden";};var f=(h?function(l,k){l.style.opacity=k;}:(e?function(l,k){var n=l.style;
if(!l.currentStyle||!l.currentStyle.hasLayout){n.zoom=1;}if(k==null||k==1){k="";}else{k="alpha(opacity="+(k*100).limit(0,100).round()+")";}var m=n.filter||l.getComputedStyle("filter")||"";
n.filter=j.test(m)?m.replace(j,k):m+k;if(!n.filter){n.removeAttribute("filter");}}:a));var g=(h?function(l){var k=l.style.opacity||l.getComputedStyle("opacity");
return(k=="")?1:k.toFloat();}:(e?function(l){var m=(l.style.filter||l.getComputedStyle("filter")),k;if(m){k=m.match(j);}return(k==null||m==null)?1:(k[1]/100);
}:function(l){var k=l.retrieve("$opacity");if(k==null){k=(l.style.visibility=="hidden"?0:1);}return k;}));var b=(i.style.cssFloat==null)?"styleFloat":"cssFloat";
Element.implement({getComputedStyle:function(m){if(this.currentStyle){return this.currentStyle[m.camelCase()];}var l=Element.getDocument(this).defaultView,k=l?l.getComputedStyle(this,null):null;
return(k)?k.getPropertyValue((m==b)?"float":m.hyphenate()):null;},setStyle:function(l,k){if(l=="opacity"){if(k!=null){k=parseFloat(k);}f(this,k);return this;
}l=(l=="float"?b:l).camelCase();if(typeOf(k)!="string"){var m=(Element.Styles[l]||"@").split(" ");k=Array.from(k).map(function(o,n){if(!m[n]){return"";
}return(typeOf(o)=="number")?m[n].replace("@",Math.round(o)):o;}).join(" ");}else{if(k==String(Number(k))){k=Math.round(k);}}this.style[l]=k;if((k==""||k==null)&&c&&this.style.removeAttribute){this.style.removeAttribute(l);
}return this;},getStyle:function(q){if(q=="opacity"){return g(this);}q=(q=="float"?b:q).camelCase();var k=this.style[q];if(!k||q=="zIndex"){k=[];for(var p in Element.ShortStyles){if(q!=p){continue;
}for(var o in Element.ShortStyles[p]){k.push(this.getStyle(o));}return k.join(" ");}k=this.getComputedStyle(q);}if(k){k=String(k);var m=k.match(/rgba?\([\d\s,]+\)/);
if(m){k=k.replace(m[0],m[0].rgbToHex());}}if(Browser.opera||Browser.ie){if((/^(height|width)$/).test(q)&&!(/px$/.test(k))){var l=(q=="width")?["left","right"]:["top","bottom"],n=0;
l.each(function(r){n+=this.getStyle("border-"+r+"-width").toInt()+this.getStyle("padding-"+r).toInt();},this);return this["offset"+q.capitalize()]-n+"px";
}if(Browser.ie&&(/^border(.+)Width|margin|padding/).test(q)&&isNaN(parseFloat(k))){return"0px";}}return k;},setStyles:function(l){for(var k in l){this.setStyle(k,l[k]);
}return this;},getStyles:function(){var k={};Array.flatten(arguments).each(function(l){k[l]=this.getStyle(l);},this);return k;}});Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@"};
Element.implement({setOpacity:function(k){f(this,k);return this;},getOpacity:function(){return g(this);}});Element.Properties.opacity={set:function(k){f(this,k);
a(this,k);},get:function(){return g(this);}};Element.Styles=new Hash(Element.Styles);Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};
["Top","Right","Bottom","Left"].each(function(q){var p=Element.ShortStyles;var l=Element.Styles;["margin","padding"].each(function(r){var s=r+q;p[r][s]=l[s]="@px";
});var o="border"+q;p.border[o]=l[o]="@px @ rgb(@, @, @)";var n=o+"Width",k=o+"Style",m=o+"Color";p[o]={};p.borderWidth[n]=p[o][n]=l[n]="@px";p.borderStyle[k]=p[o][k]=l[k]="@";
p.borderColor[m]=p[o][m]=l[m]="rgb(@, @, @)";});})();(function(){Element.Properties.events={set:function(b){this.addEvents(b);}};[Element,Window,Document].invoke("implement",{addEvent:function(f,h){var i=this.retrieve("events",{});
if(!i[f]){i[f]={keys:[],values:[]};}if(i[f].keys.contains(h)){return this;}i[f].keys.push(h);var g=f,b=Element.Events[f],d=h,j=this;if(b){if(b.onAdd){b.onAdd.call(this,h,f);
}if(b.condition){d=function(k){if(b.condition.call(this,k,f)){return h.call(this,k);}return true;};}if(b.base){g=Function.from(b.base).call(this,f);}}var e=function(){return h.call(j);
};var c=Element.NativeEvents[g];if(c){if(c==2){e=function(k){k=new DOMEvent(k,j.getWindow());if(d.call(j,k)===false){k.stop();}};}this.addListener(g,e,arguments[2]);
}i[f].values.push(e);return this;},removeEvent:function(e,d){var c=this.retrieve("events");if(!c||!c[e]){return this;}var h=c[e];var b=h.keys.indexOf(d);
if(b==-1){return this;}var g=h.values[b];delete h.keys[b];delete h.values[b];var f=Element.Events[e];if(f){if(f.onRemove){f.onRemove.call(this,d,e);}if(f.base){e=Function.from(f.base).call(this,e);
}}return(Element.NativeEvents[e])?this.removeListener(e,g,arguments[2]):this;},addEvents:function(b){for(var c in b){this.addEvent(c,b[c]);}return this;
},removeEvents:function(b){var d;if(typeOf(b)=="object"){for(d in b){this.removeEvent(d,b[d]);}return this;}var c=this.retrieve("events");if(!c){return this;
}if(!b){for(d in c){this.removeEvents(d);}this.eliminate("events");}else{if(c[b]){c[b].keys.each(function(e){this.removeEvent(b,e);},this);delete c[b];
}}return this;},fireEvent:function(e,c,b){var d=this.retrieve("events");if(!d||!d[e]){return this;}c=Array.from(c);d[e].keys.each(function(f){if(b){f.delay(b,this,c);
}else{f.apply(this,c);}},this);return this;},cloneEvents:function(e,d){e=document.id(e);var c=e.retrieve("events");if(!c){return this;}if(!d){for(var b in c){this.cloneEvents(e,b);
}}else{if(c[d]){c[d].keys.each(function(f){this.addEvent(d,f);},this);}}return this;}});Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};
Element.Events={mousewheel:{base:(Browser.firefox)?"DOMMouseScroll":"mousewheel"}};if("onmouseenter" in document.documentElement){Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2;
}else{var a=function(b){var c=b.relatedTarget;if(c==null){return true;}if(!c){return false;}return(c!=this&&c.prefix!="xul"&&typeOf(this)!="document"&&!this.contains(c));
};Element.Events.mouseenter={base:"mouseover",condition:a};Element.Events.mouseleave={base:"mouseout",condition:a};}if(!window.addEventListener){Element.NativeEvents.propertychange=2;
Element.Events.change={base:function(){var b=this.type;return(this.get("tag")=="input"&&(b=="radio"||b=="checkbox"))?"propertychange":"change";},condition:function(b){return this.type!="radio"||(b.event.propertyName=="checked"&&this.checked);
}};}Element.Events=new Hash(Element.Events);})();(function(){var c=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;
var k=function(l,m,n,o,p){while(p&&p!=l){if(m(p,o)){return n.call(p,o,p);}p=document.id(p.parentNode);}};var a={mouseenter:{base:"mouseover"},mouseleave:{base:"mouseout"},focus:{base:"focus"+(c?"":"in"),capture:true},blur:{base:c?"blur":"focusout",capture:true}};
var b="$delegation:";var i=function(l){return{base:"focusin",remove:function(m,o){var p=m.retrieve(b+l+"listeners",{})[o];if(p&&p.forms){for(var n=p.forms.length;
n--;){p.forms[n].removeEvent(l,p.fns[n]);}}},listen:function(x,r,v,n,t,s){var o=(t.get("tag")=="form")?t:n.target.getParent("form");if(!o){return;}var u=x.retrieve(b+l+"listeners",{}),p=u[s]||{forms:[],fns:[]},m=p.forms,w=p.fns;
if(m.indexOf(o)!=-1){return;}m.push(o);var q=function(y){k(x,r,v,y,t);};o.addEvent(l,q);w.push(q);u[s]=p;x.store(b+l+"listeners",u);}};};var d=function(l){return{base:"focusin",listen:function(m,n,p,q,r){var o={blur:function(){this.removeEvents(o);
}};o[l]=function(s){k(m,n,p,s,r);};q.target.addEvents(o);}};};if(!c){Object.append(a,{submit:i("submit"),reset:i("reset"),change:d("change"),select:d("select")});
}var h=Element.prototype,f=h.addEvent,j=h.removeEvent;var e=function(l,m){return function(r,q,n){if(r.indexOf(":relay")==-1){return l.call(this,r,q,n);
}var o=Slick.parse(r).expressions[0][0];if(o.pseudos[0].key!="relay"){return l.call(this,r,q,n);}var p=o.tag;o.pseudos.slice(1).each(function(s){p+=":"+s.key+(s.value?"("+s.value+")":"");
});l.call(this,r,q);return m.call(this,p,o.pseudos[0].value,q);};};var g={addEvent:function(v,q,x){var t=this.retrieve("$delegates",{}),r=t[v];if(r){for(var y in r){if(r[y].fn==x&&r[y].match==q){return this;
}}}var p=v,u=q,o=x,n=a[v]||{};v=n.base||p;q=function(B){return Slick.match(B,u);};var w=Element.Events[p];if(w&&w.condition){var l=q,m=w.condition;q=function(C,B){return l(C,B)&&m.call(C,B,v);
};}var z=this,s=String.uniqueID();var A=n.listen?function(B,C){if(!C&&B&&B.target){C=B.target;}if(C){n.listen(z,q,x,B,C,s);}}:function(B,C){if(!C&&B&&B.target){C=B.target;
}if(C){k(z,q,x,B,C);}};if(!r){r={};}r[s]={match:u,fn:o,delegator:A};t[p]=r;return f.call(this,v,A,n.capture);},removeEvent:function(r,n,t,u){var q=this.retrieve("$delegates",{}),p=q[r];
if(!p){return this;}if(u){var m=r,w=p[u].delegator,l=a[r]||{};r=l.base||m;if(l.remove){l.remove(this,u);}delete p[u];q[m]=p;return j.call(this,r,w);}var o,v;
if(t){for(o in p){v=p[o];if(v.match==n&&v.fn==t){return g.removeEvent.call(this,r,n,t,o);}}}else{for(o in p){v=p[o];if(v.match==n){g.removeEvent.call(this,r,n,v.fn,o);
}}}return this;}};[Element,Window,Document].invoke("implement",{addEvent:e(f,g.addEvent),removeEvent:e(j,g.removeEvent)});})();(function(){var h=document.createElement("div"),e=document.createElement("div");
h.style.height="0";h.appendChild(e);var d=(e.offsetParent===h);h=e=null;var l=function(m){return k(m,"position")!="static"||a(m);};var i=function(m){return l(m)||(/^(?:table|td|th)$/i).test(m.tagName);
};Element.implement({scrollTo:function(m,n){if(a(this)){this.getWindow().scrollTo(m,n);}else{this.scrollLeft=m;this.scrollTop=n;}return this;},getSize:function(){if(a(this)){return this.getWindow().getSize();
}return{x:this.offsetWidth,y:this.offsetHeight};},getScrollSize:function(){if(a(this)){return this.getWindow().getScrollSize();}return{x:this.scrollWidth,y:this.scrollHeight};
},getScroll:function(){if(a(this)){return this.getWindow().getScroll();}return{x:this.scrollLeft,y:this.scrollTop};},getScrolls:function(){var n=this.parentNode,m={x:0,y:0};
while(n&&!a(n)){m.x+=n.scrollLeft;m.y+=n.scrollTop;n=n.parentNode;}return m;},getOffsetParent:d?function(){var m=this;if(a(m)||k(m,"position")=="fixed"){return null;
}var n=(k(m,"position")=="static")?i:l;while((m=m.parentNode)){if(n(m)){return m;}}return null;}:function(){var m=this;if(a(m)||k(m,"position")=="fixed"){return null;
}try{return m.offsetParent;}catch(n){}return null;},getOffsets:function(){if(this.getBoundingClientRect&&!Browser.Platform.ios){var r=this.getBoundingClientRect(),o=document.id(this.getDocument().documentElement),q=o.getScroll(),t=this.getScrolls(),s=(k(this,"position")=="fixed");
return{x:r.left.toInt()+t.x+((s)?0:q.x)-o.clientLeft,y:r.top.toInt()+t.y+((s)?0:q.y)-o.clientTop};}var n=this,m={x:0,y:0};if(a(this)){return m;}while(n&&!a(n)){m.x+=n.offsetLeft;
m.y+=n.offsetTop;if(Browser.firefox){if(!c(n)){m.x+=b(n);m.y+=g(n);}var p=n.parentNode;if(p&&k(p,"overflow")!="visible"){m.x+=b(p);m.y+=g(p);}}else{if(n!=this&&Browser.safari){m.x+=b(n);
m.y+=g(n);}}n=n.offsetParent;}if(Browser.firefox&&!c(this)){m.x-=b(this);m.y-=g(this);}return m;},getPosition:function(p){var q=this.getOffsets(),n=this.getScrolls();
var m={x:q.x-n.x,y:q.y-n.y};if(p&&(p=document.id(p))){var o=p.getPosition();return{x:m.x-o.x-b(p),y:m.y-o.y-g(p)};}return m;},getCoordinates:function(o){if(a(this)){return this.getWindow().getCoordinates();
}var m=this.getPosition(o),n=this.getSize();var p={left:m.x,top:m.y,width:n.x,height:n.y};p.right=p.left+p.width;p.bottom=p.top+p.height;return p;},computePosition:function(m){return{left:m.x-j(this,"margin-left"),top:m.y-j(this,"margin-top")};
},setPosition:function(m){return this.setStyles(this.computePosition(m));}});[Document,Window].invoke("implement",{getSize:function(){var m=f(this);return{x:m.clientWidth,y:m.clientHeight};
},getScroll:function(){var n=this.getWindow(),m=f(this);return{x:n.pageXOffset||m.scrollLeft,y:n.pageYOffset||m.scrollTop};},getScrollSize:function(){var o=f(this),n=this.getSize(),m=this.getDocument().body;
return{x:Math.max(o.scrollWidth,m.scrollWidth,n.x),y:Math.max(o.scrollHeight,m.scrollHeight,n.y)};},getPosition:function(){return{x:0,y:0};},getCoordinates:function(){var m=this.getSize();
return{top:0,left:0,bottom:m.y,right:m.x,height:m.y,width:m.x};}});var k=Element.getComputedStyle;function j(m,n){return k(m,n).toInt()||0;}function c(m){return k(m,"-moz-box-sizing")=="border-box";
}function g(m){return j(m,"border-top-width");}function b(m){return j(m,"border-left-width");}function a(m){return(/^(?:body|html)$/i).test(m.tagName);
}function f(m){var n=m.getDocument();return(!n.compatMode||n.compatMode=="CSS1Compat")?n.html:n.body;}})();Element.alias({position:"setPosition"});[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y;
},getWidth:function(){return this.getSize().x;},getScrollTop:function(){return this.getScroll().y;},getScrollLeft:function(){return this.getScroll().x;
},getScrollHeight:function(){return this.getScrollSize().y;},getScrollWidth:function(){return this.getScrollSize().x;},getTop:function(){return this.getPosition().y;
},getLeft:function(){return this.getPosition().x;}});(function(){var f=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:false,duration:500,frames:null,frameSkip:true,link:"ignore"},initialize:function(g){this.subject=this.subject||this;
this.setOptions(g);},getTransition:function(){return function(g){return -(Math.cos(Math.PI*g)-1)/2;};},step:function(g){if(this.options.frameSkip){var h=(this.time!=null)?(g-this.time):0,i=h/this.frameInterval;
this.time=g;this.frame+=i;}else{this.frame++;}if(this.frame<this.frames){var j=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,j));
}else{this.frame=this.frames;this.set(this.compute(this.from,this.to,1));this.stop();}},set:function(g){return g;},compute:function(i,h,g){return f.compute(i,h,g);
},check:function(){if(!this.isRunning()){return true;}switch(this.options.link){case"cancel":this.cancel();return true;case"chain":this.chain(this.caller.pass(arguments,this));
return false;}return false;},start:function(k,j){if(!this.check(k,j)){return this;}this.from=k;this.to=j;this.frame=(this.options.frameSkip)?0:-1;this.time=null;
this.transition=this.getTransition();var i=this.options.frames,h=this.options.fps,g=this.options.duration;this.duration=f.Durations[g]||g.toInt();this.frameInterval=1000/h;
this.frames=i||Math.round(this.duration/this.frameInterval);this.fireEvent("start",this.subject);b.call(this,h);return this;},stop:function(){if(this.isRunning()){this.time=null;
d.call(this,this.options.fps);if(this.frames==this.frame){this.fireEvent("complete",this.subject);if(!this.callChain()){this.fireEvent("chainComplete",this.subject);
}}else{this.fireEvent("stop",this.subject);}}return this;},cancel:function(){if(this.isRunning()){this.time=null;d.call(this,this.options.fps);this.frame=this.frames;
this.fireEvent("cancel",this.subject).clearChain();}return this;},pause:function(){if(this.isRunning()){this.time=null;d.call(this,this.options.fps);}return this;
},resume:function(){if((this.frame<this.frames)&&!this.isRunning()){b.call(this,this.options.fps);}return this;},isRunning:function(){var g=e[this.options.fps];
return g&&g.contains(this);}});f.compute=function(i,h,g){return(h-i)*g+i;};f.Durations={"short":250,normal:500,"long":1000};var e={},c={};var a=function(){var h=Date.now();
for(var j=this.length;j--;){var g=this[j];if(g){g.step(h);}}};var b=function(h){var g=e[h]||(e[h]=[]);g.push(this);if(!c[h]){c[h]=a.periodical(Math.round(1000/h),g);
}};var d=function(h){var g=e[h];if(g){g.erase(this);if(!g.length&&c[h]){delete e[h];c[h]=clearInterval(c[h]);}}};})();Fx.CSS=new Class({Extends:Fx,prepare:function(b,e,a){a=Array.from(a);
var h=a[0],g=a[1];if(g==null){g=h;h=b.getStyle(e);var c=this.options.unit;if(c&&h.slice(-c.length)!=c&&parseFloat(h)!=0){b.setStyle(e,g+c);var d=b.getComputedStyle(e);
if(!(/px$/.test(d))){d=b.style[("pixel-"+e).camelCase()];if(d==null){var f=b.style.left;b.style.left=g+c;d=b.style.pixelLeft;b.style.left=f;}}h=(g||1)/(parseFloat(d)||1)*(parseFloat(h)||0);
b.setStyle(e,h+c);}}return{from:this.parse(h),to:this.parse(g)};},parse:function(a){a=Function.from(a)();a=(typeof a=="string")?a.split(" "):Array.from(a);
return a.map(function(c){c=String(c);var b=false;Object.each(Fx.CSS.Parsers,function(f,e){if(b){return;}var d=f.parse(c);if(d||d===0){b={value:d,parser:f};
}});b=b||{value:c,parser:Fx.CSS.Parsers.String};return b;});},compute:function(d,c,b){var a=[];(Math.min(d.length,c.length)).times(function(e){a.push({value:d[e].parser.compute(d[e].value,c[e].value,b),parser:d[e].parser});
});a.$family=Function.from("fx:css:value");return a;},serve:function(c,b){if(typeOf(c)!="fx:css:value"){c=this.parse(c);}var a=[];c.each(function(d){a=a.concat(d.parser.serve(d.value,b));
});return a;},render:function(a,d,c,b){a.setStyle(d,this.serve(c,b));},search:function(a){if(Fx.CSS.Cache[a]){return Fx.CSS.Cache[a];}var c={},b=new RegExp("^"+a.escapeRegExp()+"$");
Array.each(document.styleSheets,function(f,e){var d=f.href;if(d&&d.contains("://")&&!d.contains(document.domain)){return;}var g=f.rules||f.cssRules;Array.each(g,function(k,h){if(!k.style){return;
}var j=(k.selectorText)?k.selectorText.replace(/^\w+/,function(i){return i.toLowerCase();}):null;if(!j||!b.test(j)){return;}Object.each(Element.Styles,function(l,i){if(!k.style[i]||Element.ShortStyles[i]){return;
}l=String(k.style[i]);c[i]=((/^rgb/).test(l))?l.rgbToHex():l;});});});return Fx.CSS.Cache[a]=c;}});Fx.CSS.Cache={};Fx.CSS.Parsers={Color:{parse:function(a){if(a.match(/^#[0-9a-f]{3,6}$/i)){return a.hexToRgb(true);
}return((a=a.match(/(\d+),\s*(\d+),\s*(\d+)/)))?[a[1],a[2],a[3]]:false;},compute:function(c,b,a){return c.map(function(e,d){return Math.round(Fx.compute(c[d],b[d],a));
});},serve:function(a){return a.map(Number);}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(b,a){return(a)?b+a:b;}},String:{parse:Function.from(false),compute:function(b,a){return a;
},serve:function(a){return a;}}};Fx.CSS.Parsers=new Hash(Fx.CSS.Parsers);Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(b,a){this.element=this.subject=document.id(b);
this.parent(a);},set:function(b,a){if(arguments.length==1){a=b;b=this.property||this.options.property;}this.render(this.element,b,a,this.options.unit);
return this;},start:function(c,e,d){if(!this.check(c,e,d)){return this;}var b=Array.flatten(arguments);this.property=this.options.property||b.shift();var a=this.prepare(this.element,this.property,b);
return this.parent(a.from,a.to);}});Element.Properties.tween={set:function(a){this.get("tween").cancel().setOptions(a);return this;},get:function(){var a=this.retrieve("tween");
if(!a){a=new Fx.Tween(this,{link:"cancel"});this.store("tween",a);}return a;}};Element.implement({tween:function(a,c,b){this.get("tween").start(a,c,b);
return this;},fade:function(d){var e=this.get("tween"),g,c=["opacity"].append(arguments),a;if(c[1]==null){c[1]="toggle";}switch(c[1]){case"in":g="start";
c[1]=1;break;case"out":g="start";c[1]=0;break;case"show":g="set";c[1]=1;break;case"hide":g="set";c[1]=0;break;case"toggle":var b=this.retrieve("fade:flag",this.getStyle("opacity")==1);
g="start";c[1]=b?0:1;this.store("fade:flag",!b);a=true;break;default:g="start";}if(!a){this.eliminate("fade:flag");}e[g].apply(e,c);var f=c[c.length-1];
if(g=="set"||f!=0){this.setStyle("visibility",f==0?"hidden":"visible");}else{e.chain(function(){this.element.setStyle("visibility","hidden");this.callChain();
});}return this;},highlight:function(c,a){if(!a){a=this.retrieve("highlight:original",this.getStyle("background-color"));a=(a=="transparent")?"#fff":a;
}var b=this.get("tween");b.start("background-color",c||"#ffff88",a).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original"));
b.callChain();}.bind(this));return this;}});Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(b,a){this.element=this.subject=document.id(b);this.parent(a);
},set:function(a){if(typeof a=="string"){a=this.search(a);}for(var b in a){this.render(this.element,b,a[b],this.options.unit);}return this;},compute:function(e,d,c){var a={};
for(var b in e){a[b]=this.parent(e[b],d[b],c);}return a;},start:function(b){if(!this.check(b)){return this;}if(typeof b=="string"){b=this.search(b);}var e={},d={};
for(var c in b){var a=this.prepare(this.element,c,b[c]);e[c]=a.from;d[c]=a.to;}return this.parent(e,d);}});Element.Properties.morph={set:function(a){this.get("morph").cancel().setOptions(a);
return this;},get:function(){var a=this.retrieve("morph");if(!a){a=new Fx.Morph(this,{link:"cancel"});this.store("morph",a);}return a;}};Element.implement({morph:function(a){this.get("morph").start(a);
return this;}});Fx.implement({getTransition:function(){var a=this.options.transition||Fx.Transitions.Sine.easeInOut;if(typeof a=="string"){var b=a.split(":");
a=Fx.Transitions;a=a[b[0]]||a[b[0].capitalize()];if(b[1]){a=a["ease"+b[1].capitalize()+(b[2]?b[2].capitalize():"")];}}return a;}});Fx.Transition=function(c,b){b=Array.from(b);
var a=function(d){return c(d,b);};return Object.append(a,{easeIn:a,easeOut:function(d){return 1-c(1-d,b);},easeInOut:function(d){return(d<=0.5?c(2*d,b):(2-c(2*(1-d),b)))/2;
}});};Fx.Transitions={linear:function(a){return a;}};Fx.Transitions=new Hash(Fx.Transitions);Fx.Transitions.extend=function(a){for(var b in a){Fx.Transitions[b]=new Fx.Transition(a[b]);
}};Fx.Transitions.extend({Pow:function(b,a){return Math.pow(b,a&&a[0]||6);},Expo:function(a){return Math.pow(2,8*(a-1));},Circ:function(a){return 1-Math.sin(Math.acos(a));
},Sine:function(a){return 1-Math.cos(a*Math.PI/2);},Back:function(b,a){a=a&&a[0]||1.618;return Math.pow(b,2)*((a+1)*b-a);},Bounce:function(f){var e;for(var d=0,c=1;
1;d+=c,c/=2){if(f>=(7-4*d)/11){e=c*c-Math.pow((11-6*d-11*f)/4,2);break;}}return e;},Elastic:function(b,a){return Math.pow(2,10*--b)*Math.cos(20*b*Math.PI*(a&&a[0]||1)/3);
}});["Quad","Cubic","Quart","Quint"].each(function(b,a){Fx.Transitions[b]=new Fx.Transition(function(c){return Math.pow(c,a+2);});});(function(){var d=function(){},a=("onprogress" in new Browser.Request);
var c=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:true,format:false,method:"post",link:"ignore",isSuccess:null,emulation:true,urlEncoded:true,encoding:"utf-8",evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(e){this.xhr=new Browser.Request();
this.setOptions(e);this.headers=this.options.headers;},onStateChange:function(){var e=this.xhr;if(e.readyState!=4||!this.running){return;}this.running=false;
this.status=0;Function.attempt(function(){var f=e.status;this.status=(f==1223)?204:f;}.bind(this));e.onreadystatechange=d;if(a){e.onprogress=e.onloadstart=d;
}clearTimeout(this.timer);this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML};if(this.options.isSuccess.call(this,this.status)){this.success(this.response.text,this.response.xml);
}else{this.failure();}},isSuccess:function(){var e=this.status;return(e>=200&&e<300);},isRunning:function(){return !!this.running;},processScripts:function(e){if(this.options.evalResponse||(/(ecma|java)script/).test(this.getHeader("Content-type"))){return Browser.exec(e);
}return e.stripScripts(this.options.evalScripts);},success:function(f,e){this.onSuccess(this.processScripts(f),e);},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain();
},failure:function(){this.onFailure();},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr);},loadstart:function(e){this.fireEvent("loadstart",[e,this.xhr]);
},progress:function(e){this.fireEvent("progress",[e,this.xhr]);},timeout:function(){this.fireEvent("timeout",this.xhr);},setHeader:function(e,f){this.headers[e]=f;
return this;},getHeader:function(e){return Function.attempt(function(){return this.xhr.getResponseHeader(e);}.bind(this));},check:function(){if(!this.running){return true;
}switch(this.options.link){case"cancel":this.cancel();return true;case"chain":this.chain(this.caller.pass(arguments,this));return false;}return false;},send:function(o){if(!this.check(o)){return this;
}this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var l=typeOf(o);if(l=="string"||l=="element"){o={data:o};}var h=this.options;
o=Object.append({data:h.data,url:h.url,method:h.method},o);var j=o.data,f=String(o.url),e=o.method.toLowerCase();switch(typeOf(j)){case"element":j=document.id(j).toQueryString();
break;case"object":case"hash":j=Object.toQueryString(j);}if(this.options.format){var m="format="+this.options.format;j=(j)?m+"&"+j:m;}if(this.options.emulation&&!["get","post"].contains(e)){var k="_method="+e;
j=(j)?k+"&"+j:k;e="post";}if(this.options.urlEncoded&&["post","put"].contains(e)){var g=(this.options.encoding)?"; charset="+this.options.encoding:"";this.headers["Content-type"]="application/x-www-form-urlencoded"+g;
}if(!f){f=document.location.pathname;}var i=f.lastIndexOf("/");if(i>-1&&(i=f.indexOf("#"))>-1){f=f.substr(0,i);}if(this.options.noCache){f+=(f.contains("?")?"&":"?")+String.uniqueID();
}if(j&&e=="get"){f+=(f.contains("?")?"&":"?")+j;j=null;}var n=this.xhr;if(a){n.onloadstart=this.loadstart.bind(this);n.onprogress=this.progress.bind(this);
}n.open(e.toUpperCase(),f,this.options.async,this.options.user,this.options.password);if(this.options.user&&"withCredentials" in n){n.withCredentials=true;
}n.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(q,p){try{n.setRequestHeader(p,q);}catch(r){this.fireEvent("exception",[p,q]);
}},this);this.fireEvent("request");n.send(j);if(!this.options.async){this.onStateChange();}else{if(this.options.timeout){this.timer=this.timeout.delay(this.options.timeout,this);
}}return this;},cancel:function(){if(!this.running){return this;}this.running=false;var e=this.xhr;e.abort();clearTimeout(this.timer);e.onreadystatechange=d;
if(a){e.onprogress=e.onloadstart=d;}this.xhr=new Browser.Request();this.fireEvent("cancel");return this;}});var b={};["get","post","put","delete","GET","POST","PUT","DELETE"].each(function(e){b[e]=function(g){var f={method:e};
if(g!=null){f.data=g;}return this.send(f);};});c.implement(b);Element.Properties.send={set:function(e){var f=this.get("send").cancel();f.setOptions(e);
return this;},get:function(){var e=this.retrieve("send");if(!e){e=new c({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")});
this.store("send",e);}return e;}};Element.implement({send:function(e){var f=this.get("send");f.send({data:this,url:e||f.options.url});return this;}});})();
Request.HTML=new Class({Extends:Request,options:{update:false,append:false,evalScripts:true,filter:false,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(f){var e=this.options,c=this.response;
c.html=f.stripScripts(function(h){c.javascript=h;});var d=c.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);if(d){c.html=d[1];}var b=new Element("div").set("html",c.html);
c.tree=b.childNodes;c.elements=b.getElements(e.filter||"*");if(e.filter){c.tree=c.elements;}if(e.update){var g=document.id(e.update).empty();if(e.filter){g.adopt(c.elements);
}else{g.set("html",c.html);}}else{if(e.append){var a=document.id(e.append);if(e.filter){c.elements.reverse().inject(a);}else{a.adopt(b.getChildren());}}}if(e.evalScripts){Browser.exec(c.javascript);
}this.onSuccess(c.tree,c.elements,c.html,c.javascript);}});Element.Properties.load={set:function(a){var b=this.get("load").cancel();b.setOptions(a);return this;
},get:function(){var a=this.retrieve("load");if(!a){a=new Request.HTML({data:this,link:"cancel",update:this,method:"get"});this.store("load",a);}return a;
}};Element.implement({load:function(){this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString}));return this;}});if(typeof JSON=="undefined"){this.JSON={};
}JSON=new Hash({stringify:JSON.stringify,parse:JSON.parse});(function(){var special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
var escape=function(chr){return special[chr]||"\\u"+("0000"+chr.charCodeAt(0).toString(16)).slice(-4);};JSON.validate=function(string){string=string.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");
return(/^[\],:{}\s]*$/).test(string);};JSON.encode=JSON.stringify?function(obj){return JSON.stringify(obj);}:function(obj){if(obj&&obj.toJSON){obj=obj.toJSON();
}switch(typeOf(obj)){case"string":return'"'+obj.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+obj.map(JSON.encode).clean()+"]";case"object":case"hash":var string=[];
Object.each(obj,function(value,key){var json=JSON.encode(value);if(json){string.push(JSON.encode(key)+":"+json);}});return"{"+string+"}";case"number":case"boolean":return""+obj;
case"null":return"null";}return null;};JSON.decode=function(string,secure){if(!string||typeOf(string)!="string"){return null;}if(secure||JSON.secure){if(JSON.parse){return JSON.parse(string);
}if(!JSON.validate(string)){throw new Error("JSON could not decode the input; security is enabled and the value is not secure.");}}return eval("("+string+")");
};})();Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(a){this.parent(a);Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"});
},success:function(c){var b;try{b=this.response.json=JSON.decode(c,this.options.secure);}catch(a){this.fireEvent("error",[c,a]);return;}if(b==null){this.onFailure();
}else{this.onSuccess(b,c);}}});var Cookie=new Class({Implements:Options,options:{path:"/",domain:false,duration:false,secure:false,document:document,encode:true},initialize:function(b,a){this.key=b;
this.setOptions(a);},write:function(b){if(this.options.encode){b=encodeURIComponent(b);}if(this.options.domain){b+="; domain="+this.options.domain;}if(this.options.path){b+="; path="+this.options.path;
}if(this.options.duration){var a=new Date();a.setTime(a.getTime()+this.options.duration*24*60*60*1000);b+="; expires="+a.toGMTString();}if(this.options.secure){b+="; secure";
}this.options.document.cookie=this.key+"="+b;return this;},read:function(){var a=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");
return(a)?decodeURIComponent(a[1]):null;},dispose:function(){new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write("");return this;}});
Cookie.write=function(b,c,a){return new Cookie(b,a).write(c);};Cookie.read=function(a){return new Cookie(a).read();};Cookie.dispose=function(b,a){return new Cookie(b,a).dispose();
};(function(i,k){var l,f,e=[],c,b,d=k.createElement("div");var g=function(){clearTimeout(b);if(l){return;}Browser.loaded=l=true;k.removeListener("DOMContentLoaded",g).removeListener("readystatechange",a);
k.fireEvent("domready");i.fireEvent("domready");};var a=function(){for(var m=e.length;m--;){if(e[m]()){g();return true;}}return false;};var j=function(){clearTimeout(b);
if(!a()){b=setTimeout(j,10);}};k.addListener("DOMContentLoaded",g);var h=function(){try{d.doScroll();return true;}catch(m){}return false;};if(d.doScroll&&!h()){e.push(h);
c=true;}if(k.readyState){e.push(function(){var m=k.readyState;return(m=="loaded"||m=="complete");});}if("onreadystatechange" in k){k.addListener("readystatechange",a);
}else{c=true;}if(c){j();}Element.Events.domready={onAdd:function(m){if(l){m.call(this);}}};Element.Events.load={base:"load",onAdd:function(m){if(f&&this==i){m.call(this);
}},condition:function(){if(this==i){g();delete Element.Events.load;}return true;}};i.addEvent("load",function(){f=true;});})(window,document);(function(){var Swiff=this.Swiff=new Class({Implements:Options,options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:"high",allowScriptAccess:"always",wMode:"window",swLiveConnect:true},callBacks:{},vars:{}},toElement:function(){return this.object;
},initialize:function(path,options){this.instance="Swiff_"+String.uniqueID();this.setOptions(options);options=this.options;var id=this.id=options.id||this.instance;
var container=document.id(options.container);Swiff.CallBacks[this.instance]={};var params=options.params,vars=options.vars,callBacks=options.callBacks;
var properties=Object.append({height:options.height,width:options.width},options.properties);var self=this;for(var callBack in callBacks){Swiff.CallBacks[this.instance][callBack]=(function(option){return function(){return option.apply(self.object,arguments);
};})(callBacks[callBack]);vars[callBack]="Swiff.CallBacks."+this.instance+"."+callBack;}params.flashVars=Object.toQueryString(vars);if(Browser.ie){properties.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";
params.movie=path;}else{properties.type="application/x-shockwave-flash";}properties.data=path;var build='<object id="'+id+'"';for(var property in properties){build+=" "+property+'="'+properties[property]+'"';
}build+=">";for(var param in params){if(params[param]){build+='<param name="'+param+'" value="'+params[param]+'" />';}}build+="</object>";this.object=((container)?container.empty():new Element("div")).set("html",build).firstChild;
},replaces:function(element){element=document.id(element,true);element.parentNode.replaceChild(this.toElement(),element);return this;},inject:function(element){document.id(element,true).appendChild(this.toElement());
return this;},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].append(arguments));}});Swiff.CallBacks={};Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+"</invoke>");
return eval(rs);};})();




MooTools.More={version:"1.4.0.1",build:"a4244edf2aa97ac8a196fc96082dd35af1abab87"};
(function(){Events.Pseudos=function(a,b,e){var f=function(a){return{store:a.store?function(b,c){a.store("_monitorEvents:"+b,c)}:function(b,c){(a._monitorEvents||(a._monitorEvents={}))[b]=c},retrieve:a.retrieve?function(b,c){return a.retrieve("_monitorEvents:"+b,c)}:function(b,c){return!a._monitorEvents?c:a._monitorEvents[b]||c}}},g=function(b){if(-1==b.indexOf(":")||!a)return null;for(var d=Slick.parse(b).expressions[0][0],e=d.pseudos,f=e.length,g=[];f--;){var o=e[f].key,n=a[o];null!=n&&g.push({event:d.tag,
value:e[f].value,pseudo:o,original:b,listener:n})}return g.length?g:null};return{addEvent:function(a,c,e){var m=g(a);if(!m)return b.call(this,a,c,e);var l=f(this),o=l.retrieve(a,[]),n=m[0].event,r=Array.slice(arguments,2),q=c,s=this;m.each(function(a){var b=a.listener,c=q;!1==b?n+=":"+a.pseudo+"("+a.value+")":q=function(){b.call(s,a,c,arguments,q)}});o.include({type:n,event:c,monitor:q});l.store(a,o);a!=n&&b.apply(this,[a,c].concat(r));return b.apply(this,[n,q].concat(r))},removeEvent:function(a,
b){if(!g(a))return e.call(this,a,b);var c=f(this),d=c.retrieve(a);if(!d)return this;var l=Array.slice(arguments,2);e.apply(this,[a,b].concat(l));d.each(function(a,c){(!b||a.event==b)&&e.apply(this,[a.type,a.monitor].concat(l));delete d[c]},this);c.store(a,d);return this}}};var a={once:function(a,b,e,f){b.apply(this,e);this.removeEvent(a.event,f).removeEvent(a.original,b)},throttle:function(a,b,e){b._throttled||(b.apply(this,e),b._throttled=setTimeout(function(){b._throttled=!1},a.value||250))},pause:function(a,
b,e){clearTimeout(b._pause);b._pause=b.delay(a.value||250,this,e)}};Events.definePseudo=function(b,d){a[b]=d;return this};Events.lookupPseudo=function(b){return a[b]};var b=Events.prototype;Events.implement(Events.Pseudos(a,b.addEvent,b.removeEvent));["Request","Fx"].each(function(a){this[a]&&this[a].implement(Events.prototype)})})();
(function(){for(var a={relay:!1},b=["once","throttle","pause"],c=b.length;c--;)a[b[c]]=Events.lookupPseudo(b[c]);DOMEvent.definePseudo=function(b,c){a[b]=c;return this};b=Element.prototype;[Element,Window,Document].invoke("implement",Events.Pseudos(a,b.addEvent,b.removeEvent))})();
(function(){var a=function(a,b){var e=[];Object.each(b,function(b){Object.each(b,function(b){a.each(function(a){e.push(a+"-"+b+("border"==a?"-width":""))})})});return e},b=function(a,b){var e=0;Object.each(b,function(b,d){d.test(a)&&(e+=b.toInt())});return e};Element.implement({measure:function(a){if(!this||this.offsetHeight||this.offsetWidth)return a.call(this);for(var b=this.getParent(),e=[];b&&!b.offsetHeight&&!b.offsetWidth&&b!=document.body;)e.push(b.expose()),b=b.getParent();b=this.expose();
a=a.call(this);b();e.each(function(a){a()});return a},expose:function(){if("none"!=this.getStyle("display"))return function(){};var a=this.style.cssText;this.setStyles({display:"block",position:"absolute",visibility:"hidden"});return function(){this.style.cssText=a}.bind(this)},getDimensions:function(a){var a=Object.merge({computeSize:!1},a),b={x:0,y:0},e=this.getParent("body");if(e&&"none"==this.getStyle("display"))b=this.measure(function(){return a.computeSize?this.getComputedSize(a):this.getSize()});
else if(e)try{b=a.computeSize?this.getComputedSize(a):this.getSize()}catch(f){}return Object.append(b,b.x||0===b.x?{width:b.x,height:b.y}:{x:b.width,y:b.height})},getComputedSize:function(c){var c=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},c),d={},e={width:0,height:0},f;"vertical"==c.mode?(delete e.width,delete c.planes.width):"horizontal"==c.mode&&(delete e.height,delete c.planes.height);a(c.styles,c.planes).each(function(a){d[a]=
this.getStyle(a).toInt()},this);Object.each(c.planes,function(a,c){var j=c.capitalize(),k=this.getStyle(c);k=="auto"&&!f&&(f=this.getDimensions());k=d[c]=k=="auto"?f[c]:k.toInt();e["total"+j]=k;a.each(function(a){var c=b(a,d);e["computed"+a.capitalize()]=c;e["total"+j]=e["total"+j]+c})},this);return Object.append(e,d)}})})();
(function(a){var b=Element.Position={options:{relativeTo:document.body,position:{x:"center",y:"center"},offset:{x:0,y:0}},getOptions:function(a,d){d=Object.merge({},b.options,d);b.setPositionOption(d);b.setEdgeOption(d);b.setOffsetOption(a,d);b.setDimensionsOption(a,d);return d},setPositionOption:function(a){a.position=b.getCoordinateFromValue(a.position)},setEdgeOption:function(a){var d=b.getCoordinateFromValue(a.edge);a.edge=d?d:"center"==a.position.x&&"center"==a.position.y?{x:"center",y:"center"}:
{x:"left",y:"top"}},setOffsetOption:function(a,b){var e={x:0,y:0},f=a.measure(function(){return document.id(this.getOffsetParent())}),g=f.getScroll();f&&f!=a.getDocument().body&&(e=f.measure(function(){var a=this.getPosition();if("fixed"==this.getStyle("position")){var b=window.getScroll();a.x+=b.x;a.y+=b.y}return a}),b.offset={parentPositioned:f!=document.id(b.relativeTo),x:b.offset.x-e.x+g.x,y:b.offset.y-e.y+g.y})},setDimensionsOption:function(a,b){b.dimensions=a.getDimensions({computeSize:!0,styles:["padding",
"border","margin"]})},getPosition:function(a,d){var e={},d=b.getOptions(a,d),f=document.id(d.relativeTo)||document.body;b.setPositionCoordinates(d,e,f);d.edge&&b.toEdge(e,d);var g=d.offset;e.left=(0<=e.x||g.parentPositioned||d.allowNegative?e.x:0).toInt();e.top=(0<=e.y||g.parentPositioned||d.allowNegative?e.y:0).toInt();b.toMinMax(e,d);(d.relFixedPosition||"fixed"==f.getStyle("position"))&&b.toRelFixedPosition(f,e);d.ignoreScroll&&b.toIgnoreScroll(f,e);d.ignoreMargins&&b.toIgnoreMargins(e,d);e.left=
Math.ceil(e.left);e.top=Math.ceil(e.top);delete e.x;delete e.y;return e},setPositionCoordinates:function(a,b,e){var f=a.offset.y,g=a.offset.x,h=e==document.body?window.getScroll():e.getPosition(),j=h.y,h=h.x,k=window.getSize();switch(a.position.x){case "left":b.x=h+g;break;case "right":b.x=h+g+e.offsetWidth;break;default:b.x=h+(e==document.body?k.x:e.offsetWidth)/2+g}switch(a.position.y){case "top":b.y=j+f;break;case "bottom":b.y=j+f+e.offsetHeight;break;default:b.y=j+(e==document.body?k.y:e.offsetHeight)/
2+f}},toMinMax:function(a,b){var e={left:"x",top:"y"},f;["minimum","maximum"].each(function(g){["left","top"].each(function(h){f=b[g]?b[g][e[h]]:null;if(null!=f&&("minimum"==g?a[h]<f:a[h]>f))a[h]=f})})},toRelFixedPosition:function(a,b){var e=window.getScroll();b.top+=e.y;b.left+=e.x},toIgnoreScroll:function(a,b){var e=a.getScroll();b.top-=e.y;b.left-=e.x},toIgnoreMargins:function(a,b){a.left+="right"==b.edge.x?b.dimensions["margin-right"]:"center"!=b.edge.x?-b.dimensions["margin-left"]:-b.dimensions["margin-left"]+
(b.dimensions["margin-right"]+b.dimensions["margin-left"])/2;a.top+="bottom"==b.edge.y?b.dimensions["margin-bottom"]:"center"!=b.edge.y?-b.dimensions["margin-top"]:-b.dimensions["margin-top"]+(b.dimensions["margin-bottom"]+b.dimensions["margin-top"])/2},toEdge:function(a,b){var e,f;f=b.dimensions;var g=b.edge;switch(g.x){case "left":e=0;break;case "right":e=-f.x-f.computedRight-f.computedLeft;break;default:e=-Math.round(f.totalWidth/2)}switch(g.y){case "top":f=0;break;case "bottom":f=-f.y-f.computedTop-
f.computedBottom;break;default:f=-Math.round(f.totalHeight/2)}a.x+=e;a.y+=f},getCoordinateFromValue:function(a){if("string"!=typeOf(a))return a;a=a.toLowerCase();return{x:a.test("left")?"left":a.test("right")?"right":"center",y:a.test(/upper|top/)?"top":a.test("bottom")?"bottom":"center"}}};Element.implement({position:function(b){if(b&&(null!=b.x||null!=b.y))return a?a.apply(this,arguments):this;var d=this.setStyle("position","absolute").calculatePosition(b);return b&&b.returnPos?d:this.setStyles(d)},
calculatePosition:function(a){return b.getPosition(this,a)}})})(Element.prototype.position);
Fx.Elements=new Class({Extends:Fx.CSS,initialize:function(a,b){this.elements=this.subject=$$(a);this.parent(b)},compute:function(a,b,c){var d={},e;for(e in a){var f=a[e],g=b[e],h=d[e]={},j;for(j in f)h[j]=this.parent(f[j],g[j],c)}return d},set:function(a){for(var b in a)if(this.elements[b]){var c=a[b],d;for(d in c)this.render(this.elements[b],d,c[d],this.options.unit)}return this},start:function(a){if(!this.check(a))return this;var b={},c={},d;for(d in a)if(this.elements[d]){var e=a[d],f=b[d]={},
g=c[d]={},h;for(h in e){var j=this.prepare(this.elements[d],h,e[h]);f[h]=j.from;g[h]=j.to}}return this.parent(b,c)}});Fx.Move=new Class({Extends:Fx.Morph,options:{relativeTo:document.body,position:"center",edge:!1,offset:{x:0,y:0}},start:function(a){var b=this.element,c=b.getStyles("top","left");("auto"==c.top||"auto"==c.left)&&b.setPosition(b.getPosition(b.getOffsetParent()));return this.parent(b.position(Object.merge({},this.options,a,{returnPos:!0})))}});
Element.Properties.move={set:function(a){this.get("move").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("move");a||(a=new Fx.Move(this,{link:"cancel"}),this.store("move",a));return a}};Element.implement({move:function(a){this.get("move").start(a);return this}});
Element.implement({isDisplayed:function(){return"none"!=this.getStyle("display")},isVisible:function(){var a=this.offsetWidth,b=this.offsetHeight;return 0==a&&0==b?!1:0<a&&0<b?!0:"none"!=this.style.display},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var a;try{a=this.getStyle("display")}catch(b){}return"none"==a?this:this.store("element:_originalDisplay",a||"").setStyle("display","none")},show:function(a){if(!a&&this.isDisplayed())return this;a=a||this.retrieve("element:_originalDisplay")||
"block";return this.setStyle("display","none"==a?"block":a)},swapClass:function(a,b){return this.removeClass(a).addClass(b)}});Document.implement({clearSelection:function(){if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(b){}}});
(function(){var a=function(a){var c=a.options.hideInputs;if(window.OverText){var d=[null];OverText.each(function(a){d.include("."+a.options.labelClass)});d&&(c+=d.join(", "))}return c?a.element.getElements(c):null};Fx.Reveal=new Class({Extends:Fx.Morph,options:{link:"cancel",styles:["padding","border","margin"],transitionOpacity:!Browser.ie6,mode:"vertical",display:function(){return"tr"!=this.element.get("tag")?"block":"table-row"},opacity:1,hideInputs:Browser.ie?"select, input, textarea, object, embed":
null},dissolve:function(){if(!this.hiding&&!this.showing)if("none"!=this.element.getStyle("display")){this.hiding=!0;this.showing=!1;this.hidden=!0;this.cssText=this.element.style.cssText;var b=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode});this.options.transitionOpacity&&(b.opacity=this.options.opacity);var c={};Object.each(b,function(a,b){c[b]=[a,0]});this.element.setStyles({display:Function.from(this.options.display).call(this),overflow:"hidden"});var d=a(this);
d&&d.setStyle("visibility","hidden");this.$chain.unshift(function(){if(this.hidden){this.hiding=false;this.element.style.cssText=this.cssText;this.element.setStyle("display","none");d&&d.setStyle("visibility","visible")}this.fireEvent("hide",this.element);this.callChain()}.bind(this));this.start(c)}else this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("hide",this.element);else"chain"==this.options.link?this.chain(this.dissolve.bind(this)):"cancel"==this.options.link&&
!this.hiding&&(this.cancel(),this.dissolve());return this},reveal:function(){if(!this.showing&&!this.hiding)if("none"==this.element.getStyle("display")){this.hiding=!1;this.showing=!0;this.hidden=!1;this.cssText=this.element.style.cssText;var b;this.element.measure(function(){b=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode})}.bind(this));null!=this.options.heightOverride&&(b.height=this.options.heightOverride.toInt());null!=this.options.widthOverride&&(b.width=this.options.widthOverride.toInt());
this.options.transitionOpacity&&(this.element.setStyle("opacity",0),b.opacity=this.options.opacity);var c={height:0,display:Function.from(this.options.display).call(this)};Object.each(b,function(a,b){c[b]=0});c.overflow="hidden";this.element.setStyles(c);var d=a(this);d&&d.setStyle("visibility","hidden");this.$chain.unshift(function(){this.element.style.cssText=this.cssText;this.element.setStyle("display",Function.from(this.options.display).call(this));if(!this.hidden)this.showing=false;d&&d.setStyle("visibility",
"visible");this.callChain();this.fireEvent("show",this.element)}.bind(this));this.start(b)}else this.callChain(),this.fireEvent("complete",this.element),this.fireEvent("show",this.element);else"chain"==this.options.link?this.chain(this.reveal.bind(this)):"cancel"==this.options.link&&!this.showing&&(this.cancel(),this.reveal());return this},toggle:function(){"none"==this.element.getStyle("display")?this.reveal():this.dissolve();return this},cancel:function(){this.parent.apply(this,arguments);null!=
this.cssText&&(this.element.style.cssText=this.cssText);this.showing=this.hiding=!1;return this}});Element.Properties.reveal={set:function(a){this.get("reveal").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("reveal");a||(a=new Fx.Reveal(this),this.store("reveal",a));return a}};Element.Properties.dissolve=Element.Properties.reveal;Element.implement({reveal:function(a){this.get("reveal").setOptions(a).reveal();return this},dissolve:function(a){this.get("reveal").setOptions(a).dissolve();
return this},nix:function(a){var c=Array.link(arguments,{destroy:Type.isBoolean,options:Type.isObject});this.get("reveal").setOptions(a).dissolve().chain(function(){this[c.destroy?"destroy":"dispose"]()}.bind(this));return this},wink:function(){var a=Array.link(arguments,{duration:Type.isNumber,options:Type.isObject}),c=this.get("reveal").setOptions(a.options);c.reveal().chain(function(){(function(){c.dissolve()}).delay(a.duration||2E3)})}})})();
Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:!1,hideOverflow:!0,resetHeight:!1},initialize:function(a,b){a=this.element=this.subject=document.id(a);this.parent(b);var b=this.options,c=a.retrieve("wrapper"),d=a.getStyles("margin","position","overflow");b.hideOverflow&&(d=Object.append(d,{overflow:"hidden"}));b.wrapper&&(c=document.id(b.wrapper).setStyles(d));c||(c=(new Element("div",{styles:d})).wraps(a));a.store("wrapper",c).setStyle("margin",0);"visible"==a.getStyle("overflow")&&
a.setStyle("overflow","hidden");this.now=[];this.open=!0;this.wrapper=c;this.addEvent("complete",function(){(this.open=0!=c["offset"+this.layout.capitalize()])&&this.options.resetHeight&&c.setStyle("height","")},!0)},vertical:function(){this.margin="margin-top";this.layout="height";this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left";this.layout="width";this.offset=this.element.offsetWidth},set:function(a){this.element.setStyle(this.margin,a[0]);this.wrapper.setStyle(this.layout,
a[1]);return this},compute:function(a,b,c){return[0,1].map(function(d){return Fx.compute(a[d],b[d],c)})},start:function(a,b){if(!this.check(a,b))return this;this[b||this.options.mode]();var c=this.element.getStyle(this.margin).toInt(),d=this.wrapper.getStyle(this.layout).toInt(),e=[[c,d],[0,this.offset]],c=[[c,d],[-this.offset,0]],f;switch(a){case "in":f=e;break;case "out":f=c;break;case "toggle":f=0==d?e:c}return this.parent(f[0],f[1])},slideIn:function(a){return this.start("in",a)},slideOut:function(a){return this.start("out",
a)},hide:function(a){this[a||this.options.mode]();this.open=!1;return this.set([-this.offset,0])},show:function(a){this[a||this.options.mode]();this.open=!0;return this.set([0,this.offset])},toggle:function(a){return this.start("toggle",a)}});Element.Properties.slide={set:function(a){this.get("slide").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("slide");a||(a=new Fx.Slide(this,{link:"cancel"}),this.store("slide",a));return a}};
Element.implement({slide:function(a,b){var a=a||"toggle",c=this.get("slide"),d;switch(a){case "hide":c.hide(b);break;case "show":c.show(b);break;case "toggle":d=this.retrieve("slide:flag",c.open);c[d?"slideOut":"slideIn"](b);this.store("slide:flag",!d);d=!0;break;default:c.start(a,b)}d||this.eliminate("slide:flag");return this}});
var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:!1,style:!0,limit:!1,handle:!1,invert:!1,preventDefault:!1,stopPropagation:!1,modifiers:{x:"left",y:"top"}},initialize:function(){var a=Array.link(arguments,{options:Type.isObject,element:function(a){return null!=a}});this.element=document.id(a.element);this.document=this.element.getDocument();this.setOptions(a.options||{});a=typeOf(this.options.handle);this.handles=("array"==a||"collection"==a?$$(this.options.handle):
document.id(this.options.handle))||this.element;this.mouse={now:{},pos:{}};this.value={start:{},now:{}};this.selection=Browser.ie?"selectstart":"mousedown";Browser.ie&&!Drag.ondragstartFixed&&(document.ondragstart=Function.from(!1),Drag.ondragstartFixed=!0);this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.from(!1)};this.attach()},attach:function(){this.handles.addEvent("mousedown",
this.bound.start);return this},detach:function(){this.handles.removeEvent("mousedown",this.bound.start);return this},start:function(a){var b=this.options;if(!a.rightClick){b.preventDefault&&a.preventDefault();b.stopPropagation&&a.stopPropagation();this.mouse.start=a.page;this.fireEvent("beforeStart",this.element);var c=b.limit;this.limit={x:[],y:[]};var d,e;for(d in b.modifiers)if(b.modifiers[d]){var f=this.element.getStyle(b.modifiers[d]);f&&!f.match(/px$/)&&(e||(e=this.element.getCoordinates(this.element.getOffsetParent())),
f=e[b.modifiers[d]]);this.value.now[d]=b.style?(f||0).toInt():this.element[b.modifiers[d]];b.invert&&(this.value.now[d]*=-1);this.mouse.pos[d]=a.page[d]-this.value.now[d];if(c&&c[d])for(f=2;f--;){var g=c[d][f];if(g||0===g)this.limit[d][f]="function"==typeof g?g():g}}"number"==typeOf(this.options.grid)&&(this.options.grid={x:this.options.grid,y:this.options.grid});a={mousemove:this.bound.check,mouseup:this.bound.cancel};a[this.selection]=this.bound.eventStop;this.document.addEvents(a)}},check:function(a){this.options.preventDefault&&
a.preventDefault();Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)))>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),this.fireEvent("start",[this.element,a]).fireEvent("snap",this.element))},drag:function(a){var b=this.options;b.preventDefault&&a.preventDefault();this.mouse.now=a.page;for(var c in b.modifiers)if(b.modifiers[c]){this.value.now[c]=this.mouse.now[c]-this.mouse.pos[c];b.invert&&
(this.value.now[c]*=-1);if(b.limit&&this.limit[c])if((this.limit[c][1]||0===this.limit[c][1])&&this.value.now[c]>this.limit[c][1])this.value.now[c]=this.limit[c][1];else if((this.limit[c][0]||0===this.limit[c][0])&&this.value.now[c]<this.limit[c][0])this.value.now[c]=this.limit[c][0];b.grid[c]&&(this.value.now[c]-=(this.value.now[c]-(this.limit[c][0]||0))%b.grid[c]);b.style?this.element.setStyle(b.modifiers[c],this.value.now[c]+b.unit):this.element[b.modifiers[c]]=this.value.now[c]}this.fireEvent("drag",
[this.element,a])},cancel:function(a){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});a&&(this.document.removeEvent(this.selection,this.bound.eventStop),this.fireEvent("cancel",this.element))},stop:function(a){var b={mousemove:this.bound.drag,mouseup:this.bound.stop};b[this.selection]=this.bound.eventStop;this.document.removeEvents(b);a&&this.fireEvent("complete",[this.element,a])}});
Element.implement({makeResizable:function(a){var b=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},a));this.store("resizer",b);return b.addEvent("drag",function(){this.fireEvent("resize",b)}.bind(this))}});
Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:!1,precalculate:!1,includeMargins:!0,checkDroppables:!0},initialize:function(a,b){this.parent(a,b);a=this.element;this.droppables=$$(this.options.droppables);if((this.container=document.id(this.options.container))&&"element"!=typeOf(this.container))this.container=document.id(this.container.getDocument().body);if(this.options.style){if("left"==this.options.modifiers.x&&"top"==this.options.modifiers.y){var c=a.getOffsetParent(),d=a.getStyles("left",
"top");c&&("auto"==d.left||"auto"==d.top)&&a.setPosition(a.getPosition(c))}"static"==a.getStyle("position")&&a.setStyle("position","absolute")}this.addEvent("start",this.checkDroppables,!0);this.overed=null},start:function(a){this.container&&(this.options.limit=this.calculateLimit());this.options.precalculate&&(this.positions=this.droppables.map(function(a){return a.getCoordinates()}));this.parent(a)},calculateLimit:function(){var a=this.element,b=this.container,c=document.id(a.getOffsetParent())||
document.body,d=b.getCoordinates(c),e={},f={},g={},h={};["top","right","bottom","left"].each(function(d){e[d]=a.getStyle("margin-"+d).toInt();a.getStyle("border-"+d).toInt();f[d]=b.getStyle("margin-"+d).toInt();g[d]=b.getStyle("border-"+d).toInt();h[d]=c.getStyle("padding-"+d).toInt()},this);var j=0,k=0,m=d.right-g.right-(a.offsetWidth+e.left+e.right),l=d.bottom-g.bottom-(a.offsetHeight+e.top+e.bottom);this.options.includeMargins?(j+=e.left,k+=e.top):(m+=e.right,l+=e.bottom);if("relative"==a.getStyle("position")){if(d=
a.getCoordinates(c),d.left-=a.getStyle("left").toInt(),d.top-=a.getStyle("top").toInt(),j-=d.left,k-=d.top,"relative"!=b.getStyle("position")&&(j+=g.left,k+=g.top),m+=e.left-d.left,l+=e.top-d.top,b!=c)j+=f.left+h.left,k+=(Browser.ie6||Browser.ie7?0:f.top)+h.top}else j-=e.left,k-=e.top,b!=c&&(j+=d.left+g.left,k+=d.top+g.top);return{x:[j,m],y:[k,l]}},getDroppableCoordinates:function(a){var b=a.getCoordinates();"fixed"==a.getStyle("position")&&(a=window.getScroll(),b.left+=a.x,b.right+=a.x,b.top+=a.y,
b.bottom+=a.y);return b},checkDroppables:function(){var a=this.droppables.filter(function(a,c){var a=this.positions?this.positions[c]:this.getDroppableCoordinates(a),d=this.mouse.now;return d.x>a.left&&d.x<a.right&&d.y<a.bottom&&d.y>a.top},this).getLast();this.overed!=a&&(this.overed&&this.fireEvent("leave",[this.element,this.overed]),a&&this.fireEvent("enter",[this.element,a]),this.overed=a)},drag:function(a){this.parent(a);this.options.checkDroppables&&this.droppables.length&&this.checkDroppables()},
stop:function(a){this.checkDroppables();this.fireEvent("drop",[this.element,this.overed,a]);this.overed=null;return this.parent(a)}});Element.implement({makeDraggable:function(a){a=new Drag.Move(this,a);this.store("dragger",a);return a}});Class.Mutators.Binds=function(a){this.prototype.initialize||this.implement("initialize",function(){});return Array.from(a).concat(this.prototype.Binds||[])};
Class.Mutators.initialize=function(a){return function(){Array.from(this.Binds).each(function(a){var c=this[a];c&&(this[a]=c.bind(this))},this);return a.apply(this,arguments)}};
var Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(a){this.setKnobPosition(a)},initialStep:0,snap:!1,offset:0,range:!1,wheel:!1,steps:100,mode:"horizontal"},initialize:function(a,b,c){this.setOptions(c);c=this.options;this.element=document.id(a);b=this.knob=document.id(b);this.previousChange=this.previousEnd=this.step=-1;var a={},d={x:!1,y:!1};switch(c.mode){case "vertical":this.axis="y";this.property="top";this.offset=
"offsetHeight";break;case "horizontal":this.axis="x",this.property="left",this.offset="offsetWidth"}this.setSliderDimensions();this.setRange(c.range);"static"==b.getStyle("position")&&b.setStyle("position","relative");b.setStyle(this.property,-c.offset);d[this.axis]=this.property;a[this.axis]=[-c.offset,this.full-c.offset];a={snap:0,limit:a,modifiers:d,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:function(){this.isDragging=!0}.bind(this),onCancel:function(){this.isDragging=!1}.bind(this),
onComplete:function(){this.isDragging=!1;this.draggedKnob();this.end()}.bind(this)};c.snap&&this.setSnap(a);this.drag=new Drag(b,a);this.attach();null!=c.initialStep&&this.set(c.initialStep)},attach:function(){this.element.addEvent("mousedown",this.clickedElement);this.options.wheel&&this.element.addEvent("mousewheel",this.scrolledElement);this.drag.attach();return this},detach:function(){this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement);this.drag.detach();
return this},autosize:function(){this.setSliderDimensions().setKnobPosition(this.toPosition(this.step));this.drag.options.limit[this.axis]=[-this.options.offset,this.full-this.options.offset];this.options.snap&&this.setSnap();return this},setSnap:function(a){a||(a=this.drag.options);a.grid=Math.ceil(this.stepWidth);a.limit[this.axis][1]=this.full;return this},setKnobPosition:function(a){this.options.snap&&(a=this.toPosition(this.step));this.knob.setStyle(this.property,a);return this},setSliderDimensions:function(){this.full=
this.element.measure(function(){this.half=this.knob[this.offset]/2;return this.element[this.offset]-this.knob[this.offset]+2*this.options.offset}.bind(this));return this},set:function(a){0<this.range^a<this.min||(a=this.min);0<this.range^a>this.max||(a=this.max);this.step=Math.round(a);return this.checkStep().fireEvent("tick",this.toPosition(this.step)).end()},setRange:function(a,b){this.min=Array.pick([a[0],0]);this.max=Array.pick([a[1],this.options.steps]);this.range=this.max-this.min;this.steps=
this.options.steps||this.full;this.stepSize=Math.abs(this.range)/this.steps;this.stepWidth=this.stepSize*this.full/Math.abs(this.range);a&&this.set(Array.pick([b,this.step]).floor(this.min).max(this.max));return this},clickedElement:function(a){if(!(this.isDragging||a.target==this.knob)){var b=0>this.range?-1:1,a=a.page[this.axis]-this.element.getPosition()[this.axis]-this.half,a=a.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+b*this.toStep(a));this.checkStep().fireEvent("tick",
a).end()}},scrolledElement:function(a){this.set(this.step+(("horizontal"==this.options.mode?0>a.wheel:0<a.wheel)?-1:1)*this.stepSize);a.stop()},draggedKnob:function(){var a=0>this.range?-1:1,b=this.drag.value.now[this.axis],b=b.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+a*this.toStep(b));this.checkStep()},checkStep:function(){var a=this.step;this.previousChange!=a&&(this.previousChange=a,this.fireEvent("change",a));return this},end:function(){var a=this.step;
this.previousEnd!==a&&(this.previousEnd=a,this.fireEvent("complete",a+""));return this},toStep:function(a){a=(a+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?Math.round(a-a%this.stepSize):a},toPosition:function(a){return this.full*Math.abs(this.min-a)/(this.steps*this.stepSize)-this.options.offset}});
(function(){this.Tips=new Class({Implements:[Events,Options],options:{onShow:function(){this.tip.setStyle("display","block")},onHide:function(){this.tip.setStyle("display","none")},title:"title",text:function(a){return a.get("rel")||a.get("href")},showDelay:100,hideDelay:100,className:"tip-wrap",offset:{x:16,y:16},windowPadding:{x:0,y:0},fixed:!1,waiAria:!0},initialize:function(){var a=Array.link(arguments,{options:Type.isObject,elements:function(a){return null!=a}});this.setOptions(a.options);a.elements&&
this.attach(a.elements);this.container=new Element("div",{"class":"tip"});this.options.id&&(this.container.set("id",this.options.id),this.options.waiAria&&this.attachWaiAria())},toElement:function(){return this.tip?this.tip:this.tip=(new Element("div",{"class":this.options.className,styles:{position:"absolute",top:0,left:0}})).adopt(new Element("div",{"class":"tip-top"}),this.container,new Element("div",{"class":"tip-bottom"}))},attachWaiAria:function(){var a=this.options.id;this.container.set("role",
"tooltip");this.waiAria||(this.waiAria={show:function(b){a&&b.set("aria-describedby",a);this.container.set("aria-hidden","false")},hide:function(b){a&&b.erase("aria-describedby");this.container.set("aria-hidden","true")}});this.addEvents(this.waiAria)},detachWaiAria:function(){this.waiAria&&(this.container.erase("role"),this.container.erase("aria-hidden"),this.removeEvents(this.waiAria))},attach:function(a){$$(a).each(function(a){var c=this.options.title?"function"==typeOf(this.options.title)?(0,this.options.title)(a):
a.get(this.options.title):"",d=this.options.text?"function"==typeOf(this.options.text)?(0,this.options.text)(a):a.get(this.options.text):"";a.set("title","").store("tip:native",c).retrieve("tip:title",c);a.retrieve("tip:text",d);this.fireEvent("attach",[a]);c=["enter","leave"];this.options.fixed||c.push("move");c.each(function(c){var d=a.retrieve("tip:"+c);d||(d=function(d){this["element"+c.capitalize()].apply(this,[d,a])}.bind(this));a.store("tip:"+c,d).addEvent("mouse"+c,d)},this)},this);return this},
detach:function(a){$$(a).each(function(a){["enter","leave","move"].each(function(c){a.removeEvent("mouse"+c,a.retrieve("tip:"+c)).eliminate("tip:"+c)});this.fireEvent("detach",[a]);if("title"==this.options.title){var c=a.retrieve("tip:native");c&&a.set("title",c)}},this);return this},elementEnter:function(a,b){clearTimeout(this.timer);this.timer=function(){this.container.empty();["title","text"].each(function(a){var d=b.retrieve("tip:"+a),a=this["_"+a+"Element"]=(new Element("div",{"class":"tip-"+
a})).inject(this.container);d&&this.fill(a,d)},this);this.show(b);this.position(this.options.fixed?{page:b.getPosition()}:a)}.delay(this.options.showDelay,this)},elementLeave:function(a,b){clearTimeout(this.timer);this.timer=this.hide.delay(this.options.hideDelay,this,b);this.fireForParent(a,b)},setTitle:function(a){this._titleElement&&(this._titleElement.empty(),this.fill(this._titleElement,a));return this},setText:function(a){this._textElement&&(this._textElement.empty(),this.fill(this._textElement,
a));return this},fireForParent:function(a,b){(b=b.getParent())&&b!=document.body&&(b.retrieve("tip:enter")?b.fireEvent("mouseenter",a):this.fireForParent(a,b))},elementMove:function(a){this.position(a)},position:function(a){this.tip||document.id(this);var b=window.getSize(),c=window.getScroll(),d={x:this.tip.offsetWidth,y:this.tip.offsetHeight},e={x:"left",y:"top"},f={y:!1,x2:!1,y2:!1,x:!1},g={},h;for(h in e)g[e[h]]=a.page[h]+this.options.offset[h],0>g[e[h]]&&(f[h]=!0),g[e[h]]+d[h]-c[h]>b[h]-this.options.windowPadding[h]&&
(g[e[h]]=a.page[h]-this.options.offset[h]-d[h],f[h+"2"]=!0);this.fireEvent("bound",f);this.tip.setStyles(g)},fill:function(a,b){"string"==typeof b?a.set("html",b):a.adopt(b)},show:function(a){this.tip||document.id(this);this.tip.getParent()||this.tip.inject(document.body);this.fireEvent("show",[this.tip,a])},hide:function(a){this.tip||document.id(this);this.fireEvent("hide",[this.tip,a])}})})();var IIPMooViewer=new Class({Extends:Events,version:"2.0",initialize:function(a,b){this.source=a||alert("No element ID given to IIPMooViewer constructor");this.server=b.server||"/fcgi-bin/iipsrv.fcgi";this.render=b.render||"spiral";this.viewport=null;if(b.viewport)this.viewport={resolution:"resolution"in b.viewport?parseInt(b.viewport.resolution):null,rotation:"rotation"in b.viewport?parseInt(b.viewport.rotation):null,contrast:"contrast"in b.viewport?parseFloat(b.viewport.contrast):null,x:"x"in b.viewport?
parseFloat(b.viewport.x):null,y:"y"in b.viewport?parseFloat(b.viewport.y):null};else if(0<window.location.hash.length){var c=window.location.hash.split("#")[1].split(",");this.viewport={x:parseFloat(c[0]),y:parseFloat(c[1]),resolution:parseInt(c[2])}}this.images=Array(b.image.length);b.image||alert("Image location not set in class constructor options");if("array"==typeOf(b.image))for(i=0;i<b.image.length;i++)this.images[i]={src:b.image[i],sds:"0,90",cnt:this.viewport&&null!=this.viewport.contrast?
this.viewport.contrast:null,opacity:0==i?1:0};else this.images=[{src:b.image,sds:"0,90",cnt:this.viewport&&null!=this.viewport.contrast?this.viewport.contrast:null}];this.loadoptions=b.load||null;this.credit=b.credit||null;this.scale="function"===typeof Scale&&b.scale?new Scale(b.scale,b.units):null;this.enableFullscreen="native";!1==b.enableFullscreen&&(this.enableFullscreen=!1);"page"==b.enableFullscreen&&(this.enableFullscreen="page");this.fullscreen=null;!1!=this.enableFullscreen&&(this.fullscreen=
{isFullscreen:!1,targetsize:{},eventChangeName:null,enter:null,exit:null});this.disableContextMenu=!0;this.prefix=b.prefix||"images/";this.navigation=null;"function"===typeof Navigation&&(this.navigation=new Navigation({showNavWindow:b.showNavWindow,showNavButtons:b.showNavButtons,navWinSize:b.navWinSize,showCoords:b.showCoords,prefix:this.prefix}));this.winResize=!1==b.winResize?!1:!0;switch(b.protocol){case "zoomify":this.protocol=new Protocols.Zoomify;break;case "deepzoom":this.protocol=new Protocols.DeepZoom;
break;case "djatoka":this.protocol=new Protocols.Djatoka;break;default:this.protocol=new Protocols.IIP}this.preload=!0==b.preload?!0:!1;this.effects=!1;this.annotations="function"==typeof this.initAnnotationTips&&b.annotations?b.annotations:null;this.click=b.click||null;this.max_size={};this.hei=this.wid=0;this.resolutions=[];this.num_resolutions=0;this.view={x:0,y:0,w:this.wid,h:this.hei,res:0,rotation:0};this.tileSize={};this.tiles=[];this.nTilesToLoad=this.nTilesLoaded=0;this.CSSprefix="";Browser.firefox?
this.CSSprefix="-moz-":Browser.chrome||Browser.safari||Browser.Platform.ios?this.CSSprefix="-webkit-":Browser.opera?this.CSSprefix="-o-":Browser.ie&&(this.CSSprefix="ms-");var d=this;Tips=new Class({Extends:Tips,show:function(a){this.tip||document.id(this);this.tip.getParent()||this.tip.inject(document.id(d.source));this.fireEvent("show",[this.tip,a])}});window.addEvent("domready",this.load.bind(this))},requestImages:function(){this.canvas.setStyle("cursor","wait");if(!Browser.buggy){this.getView();
Math.abs(this.view.rotation%180);var a=(this.wid>this.view.w?Math.round(this.view.x+this.view.w/2):Math.round(this.wid/2))+"px",b=(this.hei>this.view.h?Math.round(this.view.y+this.view.h/2):Math.round(this.hei/2))+"px";this.canvas.setStyle(this.CSSprefix+"transform-origin",a+" "+b)}this.loadGrid();this.annotations&&(this.drawAnnotations(),this.annotationTip&&this.annotationTip.attach(this.canvas.getChildren("div.annotation")))},loadGrid:function(){var a=this.preload?1:0,b=this.getView(),c=Math.floor(b.x/
this.tileSize.w)-a,d=Math.floor(b.y/this.tileSize.h)-a;0>c&&(c=0);0>d&&(d=0);var e=b.w;this.wid<b.w&&(e=this.wid);var f=Math.ceil((e+b.x)/this.tileSize.w-1)+a,e=b.h;this.hei<b.h&&(e=this.hei);var g=Math.ceil((e+b.y)/this.tileSize.h-1)+a,a=Math.ceil(this.wid/this.tileSize.h),b=Math.ceil(this.hei/this.tileSize.h);f>=a&&(f=a-1);g>=b&&(g=b-1);var h,j;j=b=0;j=c+Math.round((f-c)/2);var k=d+Math.round((g-d)/2),e=Array((f-c)*(f-c)),m=Array((f-c)*(f-c));m.empty();var l=0;for(h=d;h<=g;h++)for(d=c;d<=f;d++)e[l]=
{},e[l].n="spiral"==this.render?Math.abs(k-h)*Math.abs(k-h)+Math.abs(j-d)*Math.abs(j-d):Math.random(),e[l].x=d,e[l].y=h,l++,b=d+h*a,m.push(b);this.nTilesLoaded=0;this.nTilesToLoad=l*this.images.length;this.canvas.get("morph").cancel();var o=this;this.canvas.getChildren("img").each(function(a){var b=parseInt(a.retrieve("tile"));if(!m.contains(b)){a.destroy();o.tiles.erase(b)}});e.sort(function(a,b){return a.n-b.n});for(f=0;f<l;f++)if(d=e[f].x,h=e[f].y,b=d+h*a,this.tiles.contains(b))this.nTilesLoaded+=
this.images.length,this.navigation&&this.navigation.refreshLoadBar(this.nTilesLoaded,this.nTilesToLoad),this.nTilesLoaded>=this.nTilesToLoad&&this.canvas.setStyle("cursor",null);else for(j=0;j<this.images.length;j++)c=new Element("img",{"class":"layer"+j+" hidden",styles:{left:d*this.tileSize.w,top:h*this.tileSize.h}}),this.effects&&c.setStyle("opacity",0.1),c.inject(this.canvas),g=this.protocol.getTileURL({server:this.server,image:this.images[j].src,resolution:this.view.res,sds:this.images[j].sds||
"0,90",contrast:this.images[j].cnt||null,gamma:this.images[j].gam||null,tileindex:b,x:d,y:h}),c.addEvents({load:function(a,b){this.effects&&a.setStyle("opacity",1);a.removeClass("hidden");if(!a.width||!a.height)a.fireEvent("error");else{this.nTilesLoaded++;this.navigation&&this.navigation.refreshLoadBar(this.nTilesLoaded,this.nTilesToLoad);this.nTilesLoaded>=this.nTilesToLoad&&this.canvas.setStyle("cursor",null);this.tiles.push(b)}}.bind(this,c,b),error:function(){this.removeEvents("error");this.set("src",
this.src+"?"+Date.now())}}),c.set("src",g),c.store("tile",b),1!==this.images[j].opacity&&this.canvas.getChildren("img.layer"+j).setStyle("opacity",this.images[j].opacity)},getRegionURL:function(){var a=this.resolutions[this.view.res].w,b=this.resolutions[this.view.res].h;return this.protocol.getRegionURL(this.server,this.images[0].src,{x:this.view.x/a,y:this.view.y/b,w:this.view.w/a,h:this.view.h/b},a)},key:function(a){var b=new DOMEvent(a),c=Math.round(this.view.w/4);switch(a.code){case 37:this.nudge(-c,
0);IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("nudge",-c,0);b.preventDefault();break;case 38:this.nudge(0,-c);IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("nudge",0,-c);b.preventDefault();break;case 39:this.nudge(c,0);IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("nudge",c,0);b.preventDefault();break;case 40:this.nudge(0,c);IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("nudge",0,c);b.preventDefault();break;case 107:a.control||(this.zoomIn(),IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("zoomIn"),
b.preventDefault());break;case 109:case 189:a.control||(this.zoomOut(),IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("zoomOut"),b.preventDefault());break;case 72:this.navigation&&this.navigation.toggleWindow();this.credit&&this.container.getElement("div.credit").get("reveal").toggle();break;case 82:a.control||(b=this.view.rotation,b=a.shift?b-90:b+90,this.rotate(b),IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("rotate",b));break;case 65:this.annotations&&this.toggleAnnotations();break;
case 27:this.fullscreen&&this.fullscreen.isFullscreen&&(IIPMooViewer.sync||this.toggleFullScreen());this.container.getElement("div.info").fade("out");break;case 70:IIPMooViewer.sync||this.toggleFullScreen();break;case 67:a.control&&prompt("URL of current view:",window.location.href.split("#")[0]+"#"+(this.view.x+this.view.w/2)/this.wid+","+(this.view.y+this.view.h/2)/this.hei+","+this.view.res)}},rotate:function(a){Browser.buggy||(this.view.rotation=a,this.canvas.setStyle(this.CSSprefix+"transform",
"rotate("+a+"deg)"),this.constrain(),this.requestImages(),this.updateNavigation())},toggleFullScreen:function(){var a,b,c,d;if(!1!=this.enableFullscreen&&(this.fullscreen.isFullscreen?(a=this.fullscreen.targetsize.pos.x,b=this.fullscreen.targetsize.pos.y,c=this.fullscreen.targetsize.size.x,d=this.fullscreen.targetsize.size.y,p=this.fullscreen.targetsize.position,this.fullscreen.exit&&this.fullscreen.exit.call(document)):(this.fullscreen.targetsize={pos:{x:this.container.style.left,y:this.container.style.top},
size:{x:this.container.style.width,y:this.container.style.height},position:this.container.style.position},b=a=0,d=c="100%",p="absolute",this.fullscreen.enter&&this.fullscreen.enter.call(this.container)),!this.fullscreen.enter))this.container.setStyles({left:a,top:b,width:c,height:d,position:p}),this.fullscreen.isFullscreen=!this.fullscreen.isFullscreen,this.fullscreen.isFullscreen?this.showPopUp(IIPMooViewer.lang.exitFullscreen):this.container.getElements("div.message").destroy(),this.reload()},showPopUp:function(a){var b=
(new Element("div",{"class":"message",html:a})).inject(this.container);(Browser.buggy?function(){b.destroy()}:function(){b.fade("out").get("tween").chain(function(){b.destroy()})}).delay(3E3)},scrollNavigation:function(a){this.canvas.get("morph").cancel();var b=Math.round(a.x*this.wid),a=Math.round(a.y*this.hei);this.view.x=b;this.view.y=a;Math.abs(b-this.view.x)<this.view.w/2&&Math.abs(a-this.view.y)<this.view.h/2&&0==this.view.rotation?this.canvas.morph({left:this.wid>this.view.w?-b:Math.round((this.view.w-
this.wid)/2),top:this.hei>this.view.h?-a:Math.round((this.view.h-this.hei)/2)}):(this.positionCanvas(),this.requestImages());IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("moveTo",b,a)},scroll:function(){var a,b;a=this.canvas.getStyle("left").toInt();b=this.canvas.getStyle("top").toInt();var c=-a,d=-b,e=this.view.rotation%360;0>e&&(e+=360);90==e?(c=this.view.x-(this.view.y+b),d=this.view.y+(this.view.x+a)):180==e?(c=this.view.x+(this.view.x+a),d=this.view.y+(this.view.y+b)):270==e&&(c=this.view.x+
(this.view.y+b),d=this.view.y-(this.view.x+a));this.moveTo(c,d);IIPMooViewer.sync&&IIPMooViewer.windows(this).invoke("moveTo",c,d)},getView:function(){var a=this.view.x,b=this.view.y,c=this.view.w,d=this.view.h;90==Math.abs(this.view.rotation%180)&&(a=Math.round(this.view.x+this.view.w/2-this.view.h/2),b=Math.round(this.view.y+this.view.h/2-this.view.w/2),0>a&&(a=0),0>b&&(b=0),c=this.view.h,d=this.view.w);return{x:a,y:b,w:c,h:d}},checkBounds:function(a,b){a>this.wid-this.view.w&&(a=this.wid-this.view.w);
b>this.hei-this.view.h&&(b=this.hei-this.view.h);if(0>a||this.wid<this.view.w)a=0;if(0>b||this.hei<this.view.h)b=0;this.view.x=a;this.view.y=b},moveTo:function(a,b){a==this.view.x&&b==this.view.y||(this.checkBounds(a,b),this.positionCanvas(),this.requestImages(),this.updateNavigation())},centerTo:function(a,b){this.moveTo(Math.round(a*this.wid-this.view.w/2),Math.round(b*this.hei-this.view.h/2))},nudge:function(a,b){var c=a,d=b,e=this.view.rotation%360;0>e&&(e+=360);90==e?(d=-a,c=b):180==e?(c=-a,
d=-b):270==e&&(c=-b,d=a);0==e?(this.checkBounds(this.view.x+c,this.view.y+d),this.canvas.morph({left:this.wid>this.view.w?-this.view.x:Math.round((this.view.w-this.wid)/2),top:this.hei>this.view.h?-this.view.y:Math.round((this.view.h-this.hei)/2)})):this.moveTo(this.view.x+c,this.view.y+d);this.updateNavigation()},zoom:function(a){a=new DOMEvent(a);a.stop();var b=1,b=a.wheel&&0>a.wheel?-1:a.shift?-1:1;if(!(1==b&&this.view.res>=this.num_resolutions-1||-1==b&&0>=this.view.res)){if(a.target){var c;c=
a.target.get("class");if("zone"!=c&"navimage"!=c)c=this.containerPosition,c={x:this.canvas.style.left.toInt()+c.x,y:this.canvas.style.top.toInt()+c.y},this.view.x=a.page.x-c.x-Math.floor(this.view.w/2),this.view.y=a.page.y-c.y-Math.floor(this.view.h/2);else{c=this.navigation.zone.getParent().getPosition();var d=this.navigation.zone.getParent().getSize(),e=this.navigation.zone.getSize();this.view.x=Math.round((a.page.x-c.x-e.x/2)*this.wid/d.x);this.view.y=Math.round((a.page.y-c.y-e.y/2)*this.hei/d.y)}if(IIPMooViewer.sync){var f=
this.view.x,g=this.view.y;IIPMooViewer.windows(this).each(function(a){a.view.x=f;a.view.y=g})}}-1==b?this.zoomOut():this.zoomIn();IIPMooViewer.sync&&(-1==b?IIPMooViewer.windows(this).invoke("zoomOut"):IIPMooViewer.windows(this).invoke("zoomIn"))}},zoomIn:function(){this.view.res<this.num_resolutions-1&&this.zoomTo(this.view.res+1)},zoomOut:function(){0<this.view.res&&this.zoomTo(this.view.res-1)},zoomTo:function(a){if(a!=this.view.res&&a<=this.num_resolutions-1&&0<=a){var b=Math.pow(2,a-this.view.res),
c,d;a>this.view.res?(c=this.resolutions[this.view.res].w>this.view.w?this.view.w*(b-1)/2:this.resolutions[a].w/2-this.view.w/2,d=this.resolutions[this.view.res].h>this.view.h?this.view.h*(b-1)/2:this.resolutions[a].h/2-this.view.h/2):(c=-this.view.w*(1-b)/2,d=-this.view.h*(1-b)/2);this.view.x=Math.round(b*this.view.x+c);this.view.y=Math.round(b*this.view.y+d);this.view.res=a;this._zoom()}},_zoom:function(){this.wid=this.resolutions[this.view.res].w;this.hei=this.resolutions[this.view.res].h;this.view.x+
this.view.w>this.wid&&(this.view.x=this.wid-this.view.w);0>this.view.x&&(this.view.x=0);this.view.y+this.view.h>this.hei&&(this.view.y=this.hei-this.view.h);0>this.view.y&&(this.view.y=0);this.positionCanvas();this.canvas.setStyles({width:this.wid,height:this.hei});this.constrain();this.canvas.getChildren("img").destroy();this.tiles.empty();this.requestImages();this.updateNavigation();this.navigation&&this.navigation.setCoords("");this.scale&&this.scale.update(this.wid/this.max_size.w,this.view.w)},
calculateNavSize:function(){var a=Math.round(this.view.w*this.navigation.options.navWinSize);this.max_size.w>2*this.max_size.h&&(a=Math.round(this.view.w/2));this.max_size.h/this.max_size.w*a>0.5*this.view.h&&(a=Math.round(0.5*this.view.h*this.max_size.w/this.max_size.h));this.navigation.size.x=a;this.navigation.size.y=Math.round(this.max_size.h/this.max_size.w*a)},calculateSizes:function(){var a=this.container.getSize();this.view.x=-1;this.view.y=-1;this.view.w=a.x;this.view.h=a.y;this.navigation&&
this.calculateNavSize();this.view.res=this.num_resolutions;var a=this.max_size.w,b=this.max_size.h;this.resolutions=Array(this.num_resolutions);this.resolutions.push({w:a,h:b});this.view.res=0;for(var c=1;c<this.num_resolutions;c++)a=Math.floor(a/2),b=Math.floor(b/2),this.resolutions.push({w:a,h:b}),a<this.view.w&&b<this.view.h&&this.view.res++;this.view.res-=1;0>this.view.res&&(this.view.res=0);this.view.res>=this.num_resolutions&&(this.view.res=this.num_resolutions-1);this.resolutions.reverse();
this.wid=this.resolutions[this.view.res].w;this.hei=this.resolutions[this.view.res].h;this.scale&&this.scale.calculateDefault(this.max_size.w)},setCredit:function(a){this.container.getElement("div.credit").set("html",a)},createWindows:function(){this.container=document.id(this.source);this.container.addClass("iipmooviewer");var a=this;"native"==this.enableFullscreen&&((document.documentElement.requestFullscreen?(this.fullscreen.eventChangeName="fullscreenchange",this.fullscreen.enter=this.container.requestFullscreen,
this.fullscreen.exit=document.cancelFullScreen):document.mozCancelFullScreen?(this.fullscreen.eventChangeName="mozfullscreenchange",this.fullscreen.enter=this.container.mozRequestFullScreen,this.fullscreen.exit=document.mozCancelFullScreen):document.webkitCancelFullScreen&&(this.fullscreen.eventChangeName="webkitfullscreenchange",this.fullscreen.enter=this.container.webkitRequestFullScreen,this.fullscreen.exit=document.webkitCancelFullScreen),this.fullscreen.enter)?document.addEventListener(this.fullscreen.eventChangeName,
function(){a.fullscreen.isFullscreen=!a.fullscreen.isFullscreen}):"100%"==this.container.getStyle("width")&&"100%"==this.container.getStyle("height")&&(this.enableFullscreen=!1));(new Element("div",{"class":"info",styles:{opacity:0},events:{click:function(){this.fade("out")}},html:'<div><div><h2><a href="http://iipimage.sourceforge.net"><img src="'+this.prefix+'iip.32x32.png"/></a>IIPMooViewer</h2>IIPImage HTML5 Ajax High Resolution Image Viewer - Version '+this.version+"<br/><ul><li>"+IIPMooViewer.lang.navigate+
"</li><li>"+IIPMooViewer.lang.zoomIn+"</li><li>"+IIPMooViewer.lang.zoomOut+"</li><li>"+IIPMooViewer.lang.rotate+"</li><li>"+IIPMooViewer.lang.fullscreen+"<li>"+IIPMooViewer.lang.annotations+"</li><li>"+IIPMooViewer.lang.navigation+"</li></ul><br/>"+IIPMooViewer.lang.more+' <a href="http://iipimage.sourceforge.net">http://iipimage.sourceforge.net</a></div></div>'})).inject(this.container);this.canvas=new Element("div",{"class":"canvas",morph:{transition:Fx.Transitions.Quad.easeInOut,onComplete:function(){a.requestImages()}}});
if(Browser.Platform.ios||Browser.Platform.android)this.addTouchEvents();else{var b=this.updateCoords.bind(this);this.touch=new Drag(this.canvas,{onStart:function(){a.canvas.addClass("drag");a.canvas.removeEvent("mousemove:throttle(75)",b)},onComplete:function(){a.scroll();a.canvas.removeClass("drag");a.canvas.addEvent("mousemove:throttle(75)",b)}})}this.canvas.inject(this.container);this.canvas.addEvents({"mousewheel:throttle(75)":this.zoom.bind(this),dblclick:this.zoom.bind(this),mousedown:function(a){(new DOMEvent(a)).stop()},
"mousemove:throttle(75)":b,mouseenter:function(){a.navigation&&a.navigation.coords&&a.navigation.coords.fade(0.65)},mouseleave:function(){a.navigation&&a.navigation.coords&&a.navigation.coords.fade("out")}});this.annotations&&this.initAnnotationTips();this.disableContextMenu&&this.container.addEvent("contextmenu",function(b){(new DOMEvent(b)).stop();a.container.getElement("div.info").fade(0.95);return!1});if(this.click){var c=this.click.bind(this);this.canvas.addEvent("mouseup",c);this.touch.addEvents({start:function(){a.canvas.removeEvents("mouseup")},
complete:function(){a.canvas.addEvent("mouseup",c)}})}var d=this.key.bind(this);this.container.addEvents({mouseenter:function(){document.addEvent("keydown",d)},mouseleave:function(){document.removeEvent("keydown",d)},mousewheel:function(a){a.preventDefault()}});(new Element("img",{src:this.prefix+"iip.32x32.png","class":"logo",title:IIPMooViewer.lang.help,events:{click:function(){a.container.getElement("div.info").fade(0.95)},mousedown:function(a){(new DOMEvent(a)).stop()}}})).inject(this.container);
this.credit&&(new Element("div",{"class":"credit",html:this.credit})).inject(this.container);this.scale&&this.scale.create(this.container);this.calculateSizes();this.navigation&&(this.navigation.create(this.container),this.navigation.setImage(this.protocol.getThumbnailURL(this.server,this.images[0].src,this.navigation.size.x)),this.navigation.addEvents({rotate:function(b){a.rotate(a.view.rotation+b);IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("rotateLeft")},zoomIn:function(){a.zoomIn();IIPMooViewer.sync&&
IIPMooViewer.windows(a).invoke("zoomIn")},zoomOut:function(){a.zoomOut();IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("zoomOut")},reload:function(){a.reload();IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("reload")},scroll:this.scrollNavigation.bind(this),zoom:this.zoom.bind(this)}));if(!Browser.Platform.ios&&!Browser.Platform.android){var e="img.logo, div.toolbar, div.scale";if(Browser.ie8||Browser.ie7)e="img.logo, div.toolbar";new Tips(e,{className:"tip",onShow:function(a){a.setStyles({opacity:0,
display:"block"}).fade(0.9)},onHide:function(a){a.fade("out").get("tween").chain(function(){a.setStyle("display","none")})}})}this.viewport&&"resolution"in this.viewport&&"undefined"==typeof this.resolutions[this.viewport.resolution]&&(this.viewport.resolution=null);this.viewport&&null!=this.viewport.resolution&&(this.view.res=this.viewport.resolution,this.wid=this.resolutions[this.view.res].w,this.hei=this.resolutions[this.view.res].h,this.touch.options.limit={x:[this.view.w-this.wid,0],y:[this.view.h-
this.hei,0]});this.viewport&&null!=this.viewport.x&&null!=this.viewport.y?this.centerTo(this.viewport.x,this.viewport.y):this.recenter();this.canvas.setStyles({width:this.wid,height:this.hei});this.requestImages();this.updateNavigation();this.scale&&this.scale.update(this.wid/this.max_size.w,this.view.w);this.viewport&&null!=this.viewport.rotation&&this.rotate(this.viewport.rotation);"onhashchange"in window&&window.addEvent("hashchange",function(){var b=window.location.hash.split("#")[1].split(",");
a.zoomTo(b[2]);a.centerTo(b[0],b[1])});this.winResize&&window.addEvent("resize",this.reflow.bind(this));this.containerPosition=this.container.getPosition();this.fireEvent("load")},updateCoords:function(a){if(this.navigation&&this.navigation.coords){var b=a.page.x-this.containerPosition.x+this.view.x-(this.wid<this.view.w?Math.round((this.view.w-this.wid)/2):0),a=a.page.y-this.containerPosition.y+this.view.y-(this.hei<this.view.h?Math.round((this.view.h-this.hei)/2):0);this.navigation.setCoords(this.transformCoords(b/
this.wid,a/this.hei))}},transformCoords:function(a,b){return this.scale?Math.round(a*this.max_size.w/this.scale.pixelscale)+this.scale.units.dims[this.scale.defaultUnit]+", "+Math.round(b*this.max_size.h/this.scale.pixelscale)+this.scale.units.dims[this.scale.defaultUnit]:Math.round(a*this.wid)+"px, "+Math.round(b*this.hei)+"px"},changeImage:function(a){this.images=[{src:a,sds:"0,90",cnt:this.viewport&&null!=this.viewport.contrast?this.viewport.contrast:null}];(new Request({method:"get",url:this.protocol.getMetaDataURL(this.server,
this.images[0].src),onComplete:function(b){b=this.protocol.parseMetaData(b||alert("Error: No response from server "+this.server));this.max_size=b.max_size;this.tileSize=b.tileSize;this.num_resolutions=b.num_resolutions;this.reload();this.navigation&&this.navigation.setImage(this.protocol.getThumbnailURL(this.server,a,this.navigation.size.x))}.bind(this),onFailure:function(){alert("Error: Unable to get image metadata from server!")}})).send()},load:function(){this.loadoptions?(this.max_size=this.loadoptions.size,
this.tileSize=this.loadoptions.tiles,this.num_resolutions=this.loadoptions.resolutions,this.createWindows()):(new Request({method:"get",url:this.protocol.getMetaDataURL(this.server,this.images[0].src),onComplete:function(a){a=this.protocol.parseMetaData(a||alert("Error: No response from server "+this.server));this.max_size=a.max_size;this.tileSize=a.tileSize;this.num_resolutions=a.num_resolutions;this.createWindows()}.bind(this),onFailure:function(){alert("Error: Unable to get image metadata from server!")}})).send()},
reflow:function(){this.containerPosition=this.container.getPosition();var a=this.container.getSize();this.view.w=a.x;this.view.h=a.y;this.positionCanvas();this.navigation&&(this.calculateNavSize(),this.navigation.reflow(this.container));this.scale&&(this.scale.update(this.wid/this.max_size.w,this.view.w),this.scale.reflow(this.container));this.requestImages();this.updateNavigation();this.constrain()},reload:function(){this.canvas.get("morph").cancel();this.canvas.getChildren("img").destroy();this.tiles.empty();
this.calculateSizes();this.viewport&&null!=this.viewport.resolution&&(this.view.res=this.viewport.resolution,this.wid=this.resolutions[this.view.res].w,this.hei=this.resolutions[this.view.res].h,this.touch.options.limit={x:[this.view.w-this.wid,0],y:[this.view.h-this.hei,0]});this.viewport&&null!=this.viewport.x&&null!=this.viewport.y?this.centerTo(this.viewport.x,this.viewport.y):this.recenter();this.canvas.setStyles({width:this.wid,height:this.hei});this.reflow();this.viewport&&null!=this.viewport.rotation?
this.rotate(this.viewport.rotation):this.rotate(0)},recenter:function(){var a=Math.round((this.wid-this.view.w)/2);this.view.x=0>a?0:a;a=Math.round((this.hei-this.view.h)/2);this.view.y=0>a?0:a;this.positionCanvas();this.constrain()},constrain:function(){var a=this.wid<this.view.w?[Math.round((this.view.w-this.wid)/2),Math.round((this.view.w-this.wid)/2)]:[this.view.w-this.wid,0],b=this.hei<this.view.h?[Math.round((this.view.h-this.hei)/2),Math.round((this.view.h-this.hei)/2)]:[this.view.h-this.hei,
0];this.touch.options.limit={x:a,y:b}},positionCanvas:function(){this.canvas.setStyles({left:this.wid>this.view.w?-this.view.x:Math.round((this.view.w-this.wid)/2),top:this.hei>this.view.h?-this.view.y:Math.round((this.view.h-this.hei)/2)})},updateNavigation:function(){if(this.navigation){var a=this.getView();this.navigation.update(a.x/this.wid,a.y/this.hei,a.w/this.wid,a.h/this.hei)}}});IIPMooViewer.synchronize=function(a){this.sync=a};
IIPMooViewer.windows=function(a){return!this.sync||!this.sync.contains(a)?[]:this.sync.filter(function(b){return b!=a})};Browser.buggy=Browser.ie&&9>Browser.version;Element.NativeEvents.hashchange=1;if("undefined"===typeof Protocols)var Protocols={};var Navigation=new Class({Extends:Events,options:{},position:{x:0,y:0},size:{x:0,y:0},initialize:function(a){this.options.showNavWindow=!1==a.showNavWindow?!1:!0;this.options.showNavButtons=!1==a.showNavButtons?!1:!0;this.options.navWinSize=a.navWinSize||0.2;this.options.showCoords=!0==a.showCoords?!0:!1;this.prefix=a.prefix},create:function(a){if(this.options.showNavWindow||this.options.showNavButtons){this.navcontainer=new Element("div",{"class":"navcontainer",styles:{width:this.size.x}});Browser.Platform.ios&&
window.navigator.standalone&&this.navcontainer.setStyle("top",20);var b=new Element("div",{"class":"toolbar",events:{dblclick:function(a){a.getElement("div.navbuttons").get("slide").toggle()}.pass(a)}});b.store("tip:text",IIPMooViewer.lang.drag);b.inject(this.navcontainer);if(this.options.showNavWindow){var c=new Element("div",{"class":"navwin",styles:{height:this.size.y}});c.inject(this.navcontainer);(new Element("img",{"class":"navimage",events:{click:this.scroll.bind(this),"mousewheel:throttle(75)":function(a){f.fireEvent("zoom",
a)},mousedown:function(a){(new DOMEvent(a)).stop()}}})).inject(c);this.zone=new Element("div",{"class":"zone",morph:{duration:500,transition:Fx.Transitions.Quad.easeInOut},events:{"mousewheel:throttle(75)":function(a){f.fireEvent("zoom",a)},dblclick:function(a){f.fireEvent("zoom",a)}},styles:{width:0,height:0}});this.zone.inject(c);this.options.showCoords&&(this.coords=new Element("div",{"class":"coords",html:"<div></div>",styles:{top:this.size.y-6,opacity:0.8},tween:{duration:1E3,transition:Fx.Transitions.Sine.easeOut,
link:"cancel"}}),this.coords.inject(this.navcontainer))}if(this.options.showNavButtons){var d=new Element("div",{"class":"navbuttons"}),e=this.prefix;["reset","zoomIn","zoomOut","rotateLeft","rotateRight"].each(function(a){(new Element("img",{src:e+a+(Browser.buggy?".png":".svg"),"class":a,events:{error:function(){this.removeEvents("error");this.src=this.src.replace(".svg",".png")}}})).inject(d)});d.inject(this.navcontainer);d.set("slide",{duration:300,transition:Fx.Transitions.Quad.easeInOut,mode:"vertical"});
var f=this;d.getElement("img.zoomIn").addEvent("click",function(){f.fireEvent("zoomIn")});d.getElement("img.zoomOut").addEvent("click",function(){f.fireEvent("zoomOut")});d.getElement("img.reset").addEvent("click",function(){f.fireEvent("reload")});d.getElement("img.rotateLeft").addEvent("click",function(){f.fireEvent("rotate",-90)});d.getElement("img.rotateRight").addEvent("click",function(){f.fireEvent("rotate",90)})}this.options.showNavWindow&&(new Element("div",{"class":"loadBarContainer",html:'<div class="loadBar"></div>',
styles:{width:this.size.x-2},tween:{duration:1E3,transition:Fx.Transitions.Sine.easeOut,link:"cancel"}})).inject(this.navcontainer);this.navcontainer.inject(a);this.options.showNavWindow&&this.zone.makeDraggable({container:this.navcontainer.getElement("div.navwin"),onStart:function(){var a=f.zone.getPosition();f.position={x:a.x,y:a.y-10};f.zone.get("morph").cancel()},onComplete:this.scroll.bind(this)});this.navcontainer.makeDraggable({container:a,handle:b})}},toggleWindow:function(){this.navcontainer&&
this.navcontainer.get("reveal").toggle()},refreshLoadBar:function(a,b){if(this.options.showNavWindow){var c=a/b*this.size.x,d=this.navcontainer.getElement("div.loadBarContainer"),e=d.getElement("div.loadBar");e.setStyle("width",c);e.set("html",IIPMooViewer.lang.loading+"&nbsp;:&nbsp;"+Math.round(100*(a/b))+"%");"0.85"!=d.style.opacity&&d.setStyles({visibility:"visible",opacity:0.85});a>=b&&d.fade("out")}},reflow:function(a){a.getElements("div.navcontainer, div.navcontainer div.loadBarContainer").setStyle("width",
this.size.x);this.options.showNavWindow&&(this.navcontainer&&this.navcontainer.setStyles({top:Browser.Platform.ios&&window.navigator.standalone?20:10,left:a.getPosition(a).x+a.getSize().x-this.size.x-10}),this.zone&&this.zone.getParent().setStyle("height",this.size.y),this.options.showCoords&&this.coords.setStyle("top",this.size.y-6))},setImage:function(a){this.navcontainer&&this.navcontainer.getElement("img.navimage")&&(this.navcontainer.getElement("img.navimage").src=a)},setCoords:function(a){this.coords&&
this.coords.getElement("div").set("html",a)},scroll:function(a){this.zone.get("morph").cancel();var b=0,c=0,b=this.zone.getSize(),d=b.x,e=b.y;if(a.event)a.stop(),c=this.zone.getParent().getPosition(),b=a.page.x-c.x-Math.floor(d/2),c=a.page.y-c.y-Math.floor(e/2);else if(b=a.offsetLeft,c=a.offsetTop-10,3>Math.abs(b-this.position.x)&&3>Math.abs(c-this.position.y))return;b>this.size.x-d&&(b=this.size.x-d);c>this.size.y-e&&(c=this.size.y-e);0>b&&(b=0);0>c&&(c=0);b/=this.size.x;c/=this.size.y;this.fireEvent("scroll",
{x:b,y:c});a.event&&this.update(b,c,d/this.size.x,e/this.size.y)},update:function(a,b,c,d){if(this.options.showNavWindow){a*=this.size.x;a>this.size.x&&(a=this.size.x);0>a&&(a=0);b*=this.size.y;b>this.size.y&&(b=this.size.y);0>b&&(b=0);c*=this.size.x;a+c>this.size.x&&(c=this.size.x-a);d*=this.size.y;d+b>this.size.y&&(d=this.size.y-b);var e=this.zone.offsetHeight-this.zone.clientHeight;this.zone.morph({fps:30,left:a,top:b+8,width:0<c-e?c-e:1,height:0<d-e?d-e:1})}}});var Scale=new Class({initialize:function(a,b){this.pixelscale=a;this.units={dims:"pm,nm,&#181;m,mm,cm,m,km".split(","),orders:[1.0E-12,1.0E-9,1.0E-6,0.001,0.01,1,1E3],mults:[1,2,5,10,50,100],factor:1E3};b&&(!1==instanceOf(b,String)?this.units=b:"degrees"==b&&(this.units={dims:["''","'","&deg"],orders:[1/3600,1/60,1],mults:[1,10,15,30],factor:3600}))},create:function(a){this.scale=(new Element("div",{"class":"scale",title:IIPMooViewer.lang.scale,html:'<div class="ruler"></div><div class="label"></div>'})).inject(a);
this.scale.makeDraggable({container:a});this.scale.getElement("div.ruler").set("tween",{transition:Fx.Transitions.Quad.easeInOut})},update:function(a,b){var c=this.units.factor*this.pixelscale*a,d,e;d=0;a:for(;d<this.units.orders.length;d++)for(e=0;e<this.units.mults.length;e++)if(this.units.orders[d]*this.units.mults[e]*c>b/20)break a;d>=this.units.orders.length&&(d=this.units.orders.length-1);e>=this.units.mults.length&&(e=this.units.mults.length-1);var f=this.units.mults[e]+this.units.dims[d],
c=c*this.units.orders[d]*this.units.mults[e]-4;this.scale.getElement("div.ruler").tween("width",c);this.scale.getElement("div.label").set("html",f)},calculateDefault:function(a){for(var b=0;b<this.units.orders.length&&!(1E3>a/(this.units.orders[b]*this.units.factor*this.pixelscale));b++);this.defaultUnit=b},reflow:function(a){this.scale.setStyles({left:10,top:a.getSize().y-a.getElement("div.scale").getSize().y-10})}});IIPMooViewer.implement({addTouchEvents:function(){if(Browser.Platform.ios||Browser.Platform.android){var a=this;this.touch={options:{}};this.container.addEvent("touchmove",function(a){a.preventDefault()});document.body.addEvents({touchmove:function(a){a.preventDefault()},orientationchange:function(){a.container.setStyles({width:"100%",height:"100%"});this.reflow.delay(500,this)}.bind(this)});this.canvas.addEvents({touchstart:function(b){b.preventDefault();a.touchend=null;if(1==b.touches.length){var c=
a.canvas.retrieve("taptime")||0,d=Date.now();a.canvas.store("taptime",d);a.canvas.store("tapstart",1);500>d-c?(a.canvas.eliminate("taptime"),a.zoomIn(),IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("zoomIn")):(a.touchstart={x:b.touches[0].pageX,y:b.touches[0].pageY},a.canvas.addClass("drag"))}else 2==b.touches.length&&(a.canvas.store("gesturestart",1),a.touchstart=[{x:b.touches[0].pageX,y:b.touches[0].pageY},{x:b.touches[1].pageX,y:b.touches[1].pageY}])},touchmove:function(b){if(1==b.touches.length){a.touchend=
{x:b.touches[0].pageX,y:b.touches[0].pageY};var c=a.touchend.x-a.touchstart.x,d=a.touchend.y-a.touchstart.y,c=a.view.x-c,d=a.view.y-d;c>a.wid-a.view.w&&(a.touchend.x=this.touchstart.x-a.wid+a.view.w);d>a.hei-a.view.h&&(a.touchend.y=this.touchstart.y-a.hei+a.view.h);0>c&&(a.touchend.x=a.touchstart.x+a.view.x);0>d&&(a.touchend.y=a.touchstart.y+a.view.y);c=a.touchend.x-a.touchstart.x;d=a.touchend.y-a.touchstart.y;a.canvas.setStyle(a.CSSprefix+"transform","translate3d("+c+"px,"+d+"px, 0 ) rotate("+a.view.rotation+
"deg)")}2==b.touches.length&&(a.touchend=[{x:b.touches[0].pageX,y:b.touches[0].pageY},{x:b.touches[1].pageX,y:b.touches[1].pageY}],d=Math.round((b.touches[0].pageX+b.touches[1].pageX)/2)+a.view.x,b=Math.round((b.touches[0].pageY+b.touches[1].pageY)/2)+a.view.y,a.canvas.setStyle(this.CSSprefix+"transform-origin",d+"px,"+b+"px"))},touchend:function(){if(1==a.canvas.retrieve("gesturestart")){a.canvas.removeClass("drag");a.canvas.eliminate("tapstart");a.canvas.eliminate("gesturestart");var b=(a.touchend[1].x-
a.touchend[0].x)*(a.touchend[1].x-a.touchend[0].x)+(a.touchend[1].y-a.touchend[0].y)*(a.touchend[1].y-a.touchend[0].y)-((a.touchstart[1].x-a.touchstart[0].x)*(a.touchstart[1].x-a.touchstart[0].x)+(a.touchstart[1].y-a.touchstart[0].y)*(a.touchstart[1].y-a.touchstart[0].y));2E4<Math.abs(b)&&(0<b?(a.zoomIn(),IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("zoomIn")):0>b&&(a.zoomOut(),IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("zoomOut")));var b=180*Math.atan2(a.touchend[1].y-a.touchend[0].y,
a.touchend[1].x-a.touchend[0].x)/Math.PI,c=180*Math.atan2(a.touchstart[1].y-a.touchstart[0].y,a.touchstart[1].x-a.touchstart[0].x)/Math.PI,b=b-c;25<Math.abs(b)&&(c=a.view.rotation,c=0<b?c+90:c-90,a.rotate(c),IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("rotate",c));a.touchend=null}else 1==a.canvas.retrieve("tapstart")&&a.touchend&&(a.canvas.eliminate("tapstart"),a.view.x-=a.touchend.x-a.touchstart.x,a.view.y-=a.touchend.y-a.touchstart.y,a.touchend=null,a.view.x>a.wid-a.view.w&&(a.view.x=a.wid-
a.view.w),a.view.y>a.hei-a.view.h&&(a.view.y=a.hei-a.view.h),0>a.view.x&&(a.view.x=0),0>a.view.y&&(a.view.y=0),a.canvas.positionCanvas(),a.requestImages(),a.updateNavigation(),IIPMooViewer.sync&&IIPMooViewer.windows(a).invoke("moveTo",a.view.x,a.view.y),a.canvas.removeClass("drag"))}})}Browser.Platform.ios&&window.navigator.standalone&&this.container.getElement("img.logo").setStyle("top",15)}});Protocols.IIP=new Class({getMetaDataURL:function(a,b){return a+"?FIF="+b+"&obj=IIP,1.0&obj=Max-size&obj=Tile-size&obj=Resolution-number"},getTileURL:function(a){var b=Array("?FIF="+a.image);a.contrast&&b.push("CNT="+a.contrast);a.sds&&b.push("SDS="+a.sds);a.rotation&&b.push("ROT="+a.rotation);a.gamma&&b.push("GAM="+a.gamma);a.shade&&b.push("SHD="+a.shade);b.push("JTL="+a.resolution+","+a.tileindex);return a.server+b.join("&")},parseMetaData:function(a){var b=a.split("Max-size");b[1]||alert("Error: Unexpected response from server "+
this.server);var c=b[1].split(" "),d={w:parseInt(c[0].substring(1,c[0].length)),h:parseInt(c[1])},b=a.split("Tile-size"),c=b[1].split(" "),c={w:parseInt(c[0].substring(1,c[0].length)),h:parseInt(c[1])},b=a.split("Resolution-number"),a=parseInt(b[1].substring(1,b[1].length));return{max_size:d,tileSize:c,num_resolutions:a}},getRegionURL:function(a,b,c,d){return a+"?FIF="+b+"&WID="+d+"&RGN="+(c.x+","+c.y+","+c.w+","+c.h)+"&CVT=jpeg"},getThumbnailURL:function(a,b,c){return a+"?FIF="+b+"&WID="+c+"&QLT=98&CVT=jpeg"}});IIPMooViewer.implement({initAnnotationTips:function(){this.annotationTip=null;this.annotationsVisible=!0;this.createAnnotationsArray();var a=this;this.canvas.addEvent("mouseenter",function(){a.annotationsVisible&&a.canvas.getElements("div.annotation").removeClass("hidden")});this.canvas.addEvent("mouseleave",function(){a.annotationsVisible&&a.canvas.getElements("div.annotation").addClass("hidden")})},createAnnotationsArray:function(){var a=[];Object.each(iipmooviewer.annotations,function(b,c){b.id=
c;a.push(b)});a.sort(function(a,c){return c.w*c.h-a.w*a.h});this.annotation_array=a},drawAnnotations:function(){if(this.annotations){for(var a,b=0,c=this.annotation_array.length;b<c;b++){a=this.annotation_array[b];var d={left:Math.round(this.wid*a.x),top:Math.round(this.hei*a.y),width:Math.round(this.wid*a.w),height:Math.round(this.hei*a.h)},e=$("annotation-"+a.id);e?e.setStyles(d):this.initAnnotation(a,d)}this.annotationTip||(this.annotationTip=this.createAnnotationsTips())}},initAnnotation:function(a,
b){var c="annotation";a.category&&(c+=" "+a.category);c=(new Element("div",{id:"annotation-"+a.id,"class":c,styles:b})).inject(this.canvas);this.annotationsVisible||c.addClass("hidden");if("function"==typeof this.editAnnotation){var d=this;c.addEvent("dblclick",function(a){(new DOMEvent(a)).stop();d.editAnnotation(this)})}var e=a.text;a.title&&(e="<h1>"+a.title+"</h1>"+e);c.store("tip:text",e)},createAnnotationsTips:function(){return new Tips("div.annotation",{className:"tip",fixed:!0,offset:{x:30,
y:30},hideDelay:300,link:"chain",onShow:function(a){a.setStyles({opacity:a.getStyle("opacity"),display:"block"}).fade(0.9);a.addEvents({mouseleave:function(){this.active=!1;this.fade("out").get("tween").chain(function(){this.element.setStyle("display","none")})},mouseenter:function(){this.active=!0}})},onHide:function(a){a.active||(a.fade("out").get("tween").chain(function(){this.element.setStyle("display","none")}),a.removeEvents(["mouseenter","mouseleave"]))}})},toggleAnnotations:function(){var a=
this.canvas.getElements("div.annotation");a&&(this.annotationsVisible?(a.addClass("hidden"),this.annotationsVisible=!1,this.showPopUp(IIPMooViewer.lang.annotationsDisabled)):(a.removeClass("hidden"),this.annotationsVisible=!0))},destroyAnnotations:function(){this.annotationTip&&this.annotationTip.detach(this.canvas.getChildren("div.annotation"));this.canvas.getChildren("div.annotation").each(function(a){a.eliminate("tip:text");a.destroy()})}});IIPMooViewer.implement({blend:function(a){this.addEvent("load",function(){this.images[1]={src:a[0][0],sds:"0,90"};this.createBlendingInterface();a.each(function(a){(new Element("option",{value:a[0],html:a[1]})).inject(document.id("baselayer")).clone().inject(document.id("overlay"))})})},createBlendingInterface:function(){var a=this;(new Element("div",{"class":"blending",html:'<h2 title="<h2>Image Comparison</h2>Select the pair of images you wish<br/>to compare from the menus below.<br/>Use the slider to blend smoothly<br/>between them">Image Comparison</h2><span>Image 1</span><select id="baselayer"></select><br/><br/><span>Move slider to blend between images:</span><br/><div id="area"><div id="knob"></div></div><br/><span>Image 2</span><select id="overlay"></select><br/>'})).inject(this.navigation.navcontainer);
new Tips("div.blending h2",{className:"tip",onShow:function(a){a.setStyle("opacity",0);a.fade(0.7)},onHide:function(a){a.fade(0)}});var b=new Slider(document.id("area"),document.id("knob"),{range:[0,100],onChange:function(b){a.images[1]&&(a.images[1].opacity=b/100,a.canvas.getChildren("img.layer1").setStyle("opacity",a.images[1].opacity))}});window.addEvent("resize",function(){b.autosize()});document.id("baselayer").addEvent("change",function(){a.images[0].src=document.id("baselayer").value;a.canvas.getChildren("img.layer0").destroy();
a.tiles.empty();a.requestImages()});document.id("overlay").addEvent("change",function(){var b=0;a.images[1]&&(b=a.images[1].opacity);a.images[1]={src:document.id("overlay").value,opacity:b};a.canvas.getChildren("img.layer1").destroy();a.tiles.empty();a.requestImages()})}});IIPMooViewer.lang={help:"click for help",scale:"draggable scale",navigate:"To navigate within image: drag image within main window or drag zone within the navigation window or click an are a within navigation window",zoomIn:'To zoom in: double click or use the mouse scroll wheel or simply press the "+" key',zoomOut:'To zoom out: shift double click or use the mouse wheel or press the "-" key',rotate:'To rotate image clockwise: press the "r" key, anti-clockwise: press shift and "r"',fullscreen:'For fullscreen: press the "f" key',
annotations:'To toggle any annotations: press the "a" key',navigation:'To show/hide navigation window: press "h" key',more:"For more information visit",exitFullscreen:'Press "Esc" to exit fullscreen mode',loading:"loading",drag:"* Drag to move<br/>* Double Click to show/hide buttons<br/>* Press h to hide",annotationsDisabled:'Annotations disabled<br/>Press "a" to re-enable'};